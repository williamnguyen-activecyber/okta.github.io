<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
  <script>
    var searchDomain = 'https://developer.okta.com';
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager
    }
	</script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 	

  <link type="text/css" rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css" media="all" />
  <meta class="swiftype" name="title" data-type="string" content="Authentication | Okta Developer" />
  <meta class="swiftype" name="summary" data-type="string" content="Authentication API" />

  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-bdc44e64f3ccf409e81fcbd180b78cdc72901f2b97af69c18e6bb44dd908d3d2.css">
  
  
  <title>Authentication | Okta Developer</title>
  <meta name="description" content="Authentication API">
  <link rel="canonical" href="https://developer.okta.com/docs/api/resources/authn.html">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#21313a">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  <div class="Page authentication Page--docs-page">
    <!-- START Header -->
    




<header class="Header is-fixed">

  <div class="Wrap">

    <a class="Logo" href="https://developer.okta.com">
      <svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg>
    </a>

    <nav class="Header-nav PrimaryNav">
      <ul class="menu">
        <li class="first leaf">
          <a href="https://developer.okta.com/product/">Product</a>
        </li>
        <li class="leaf">
          <a href="https://developer.okta.com/pricing/">Pricing</a>
        </li>
        <li class="leaf">
          <a href="/blog/">Blog</a>
        </li>
        <li class="leaf">
          <a href="/documentation/" class="active">Docs</a>
        </li>
        <li class="last expanded">
          <span class="nolink">Support</span>
          <ul class="menu">
            <li class="first leaf"><a href="https://devforum.okta.com/">Okta Developer Forums</a></li>
            <li class="last leaf"><a href="mailto:developers@okta.com">developers@okta.com</a></li>
          </ul>
        </li>
      </ul>
      <a class="PrimaryNav-toggle" href="#">
        <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g class="MenuIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                <path d="M1,16 L19,16" class="MenuIcon-line1" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,4 L19,4" class="MenuIcon-line2" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line3" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line4" stroke="#FFFFFF" stroke-width="2"></path>
            </g>
        </svg>
        <svg class="CloseIcon" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF">
              <g id="Search-bar-Active" transform="translate(30.000000, 26.000000)">
                <polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon>
              </g>
            </g>
          </g>
        </svg>
      </a>

      <div class="PrimaryNav-cta">
        <a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3Dhttps://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3D" class="Button--redOutline">Login</a>
        <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a>
      </div>

      <a class="SearchIcon" href="#"></a>
      <form id="form_search" class="SearchBar Formisimo_clocked_69929" method="get" action="https://developer.okta.com/search/" name="form_search" __bizdiag="-784164280" __biza="WJ__">
        <input type="text" name="stq" autocomplete="off" id="st-search-input-auto" class="st-search-input" placeholder="Search">
        <input type="submit" name="submit" value="GO">
      </form>

    </nav>

  </div>

</header>

    <!-- END Header -->
     <!-- START Page Center w/Sub Nav & Content -->
    <section class="PageContent DynamicSidebar has-tableOfContents">
      <!-- START Fixed sidebar --><aside class="Sidebar">
        <h2 class="Sidebar-location Sidebar-toggle h6">Navigation</h2>
        <div class="Sidebar-close Sidebar-toggle"></div>
        <div>
          <h3 class="Sidebar-title">Use Cases</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/use_cases/authentication/">Authentication</a>
            </li>
            <li>
              <a href="/use_cases/mfa/">Multi-Factor Authentication</a>
            </li>
            <li>
              <a href="/use_cases/api_access_management/">API Access Management</a>
            </li>
            <li>
              <a href="/use_cases/integrate_with_okta/">Integrate with Okta</a>
            </li>
          </ul>
          <h3 class="Sidebar-title">Reference</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/docs/api/getting_started/api_test_client.html">Getting Started</a>
            </li>
            <li>
              <a href="/docs/api/resources/authn.html">Authentication Reference</a>
              <ul id="Sidebar_References" class="Sidebar-hide">
                <li class="is-active"><a href="/docs/api/resources/authn.html">Authentication</a></li>
                <li><a href="/docs/api/resources/oauth2.html">OAuth 2.0</a></li>
                <li><a href="/docs/api/resources/oidc.html">OpenID Connect</a></li>
                <li><a href="/docs/api/resources/social_authentication.html">Social Login</a></li>
                <li><a href="/docs/api/resources/sessions.html">Sessions</a></li>
              </ul>
            </li>
            <li>
              <a href="/docs/api/resources/apps.html">API Reference</a>
              <ul id="Sidebar_Resources" class="Sidebar-hide">
                <li><a href="/docs/api/resources/apps.html">Apps</a></li>
                <li><a href="/docs/api/resources/events.html">Events</a></li>
                <li><a href="/docs/api/resources/oauth-clients.html">Dynamic Client Registration</a></li>
                <li><a href="/docs/api/resources/factors.html">Factors</a></li>
                <li><a href="/docs/api/resources/groups.html">Groups</a></li>
                <li><a href="/docs/api/resources/idps.html">Identity Providers</a></li>
                <li><a href="/docs/api/resources/policy.html">Policy</a></li>
                <li><a href="/docs/api/resources/roles.html">Admin Roles</a></li>
                <li><a href="/docs/api/resources/schemas.html">Schemas</a></li>
                <li><a href="/docs/api/resources/system_log.html">System Log (Beta)</a></li>
                <li><a href="/docs/api/resources/templates.html">Templates</a></li>
                <li><a href="/docs/api/resources/users.html">Users</a></li>
                <li><a href="/docs/api/resources/zones.html">Zones</a></li>
              </ul>
            </li>
            <li>
              <a href="/reference/error_codes/">Error Codes</a>
            </li>
            <li>
              <a href="/reference/okta_expression_language/">Okta Expression Language</a>
            </li>
            <li>
              <a href="/docs/platform-release-notes/platform-release-notes.html">Okta API Release Notes</a>
            </li>
          </ul>

          <h3 class="Sidebar-title">Standards</h3>
          <ul class="Sidebar-nav">
            
            
            
            <li>
              <a href="/standards/OAuth/">OAuth 2.0 and Okta</a>
            </li>
            
            
            <li>
              <a href="/standards/OIDC/">OpenID Connect and Okta</a>
            </li>
            
            
            <li>
              <a href="/standards/SAML/">SAML</a>
            </li>
            
            
            
            
            <li>
              <a href="/standards/SCIM/">SCIM Provisioning with Lifecycle Management</a>
            </li>
            
          </ul>
          <script>
            if (document.querySelectorAll("#Sidebar_Resources .is-active").length) {
                document.getElementById('Sidebar_Resources').classList.remove('Sidebar-hide');
            }

            if (document.querySelectorAll("#Sidebar_References .is-active").length) {
                document.getElementById('Sidebar_References').classList.remove('Sidebar-hide');
            }
          </script>
        </div>
      </aside>
<!-- END Fixed sidebar -->
      <!-- START Page Content -->
      <div class="PageContent-main" id="docs-body">
        <a id="edit-link" href="https://github.com/okta/okta.github.io/edit/source/_source/_docs/api/resources/authn.md">Edit Page</a>
      <h1 id="authentication-api">Authentication API</h1>

<p>The Okta Authentication API provides operations to authenticate users, perform multi-factor enrollment and verification, recover forgotten passwords, and unlock accounts. It can be used as a standalone API to provide the identity layer on top of your existing application, or it can be integrated with the Okta <a href="sessions.html">Sessions API</a> to obtain an Okta <a href="/use_cases/authentication/session_cookie.html">session cookie</a> and access apps within Okta.</p>

<p>The API is targeted for developers who want to build their own end-to-end login experience to replace the built-in Okta login experience and addresses the following key scenarios:</p>

<ul>
  <li><strong>Primary authentication</strong> allows you to verify username and password credentials for a user.</li>
  <li><strong>Multifactor authentication</strong> (MFA) strengthens the security of password-based authentication by requiring additional verification of another factor such as a temporary one-time password or an SMS passcode. The Authentication API supports user enrollment with MFA factors enabled by the administrator, as well as MFA challenges based on your <strong>Okta Sign-On Policy</strong>.</li>
  <li><strong>Recovery</strong> allows users to securely reset their password if they’ve forgotten it, or unlock their account if it has been locked out due to excessive failed login attempts. This functionality is subject to the security policy set by the administrator.</li>
</ul>

<h2 id="application-types">Application Types</h2>

<p>The behavior of the Okta Authentication API varies depending on the type of your application and your org’s security policies such as the <strong>Okta Sign-On Policy</strong>, <strong>MFA Enrollment Policy</strong>, or <strong>Password Policy</strong>.</p>

<blockquote>
  <p>Policy evaluation is conditional on the <a href="/docs/api/getting_started/design_principles.html#client-request-context">client request context</a> such as IP address.</p>
</blockquote>

<h3 id="public-application">Public Application</h3>

<p>A public application is an application that anonymously starts an authentication or recovery transaction without an API token, such as the <a href="/docs/guides/okta_sign-in_widget.html">Okta Sign-In Widget</a>.  Public applications are aggressively rate-limited to prevent abuse and require primary authentication to be successfully completed before releasing any metadata about a user.</p>

<h3 id="trusted-application">Trusted Application</h3>

<p>Trusted applications are backend applications that act as authentication broker or login portal for your Okta organization and may start an authentication or recovery transaction with an administrator API token.  Trusted apps may implement their own recovery flows and primary authentication process and may receive additional metadata about the user before primary authentication has successfully completed.</p>

<blockquote>
  <p>Trusted web applications may need to override the <a href="/docs/api/getting_started/design_principles.html#client-request-context">client request context</a> to forward the originating client context for the user.</p>
</blockquote>

<h2 id="getting-started-with-authentication">Getting Started with Authentication</h2>

<ol>
  <li>Make sure you need the API. Check out the <a href="/docs/guides/okta_sign-in_widget.html">Okta Sign-In Widget</a> which is built on the Authentication API. The Sign-In Widget is easier to use and supports basic use cases.</li>
  <li>For more advanced use cases, learn <a href="/docs/api/getting_started/api_test_client.html">the Okta API basics</a>.</li>
  <li>
    <p>Explore the Authentication API:</p>

    <p><a href="https://app.getpostman.com/run-collection/f9684487e584101f25a3"><img src="https://run.pstmn.io/button.svg" alt="Run in Postman" /></a></p>
  </li>
</ol>

<h2 id="authentication-operations">Authentication Operations</h2>

<h3 class="api api-operation" id="primary-authentication">Primary Authentication</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn</span></p>

<p>Every authentication transaction starts with primary authentication which validates a user’s primary password credential. <strong>Password Policy</strong>, <strong>MFA Policy</strong>,  and <strong>Sign-On Policy</strong> are evaluated during primary authentication to determine if the user’s password is expired, a factor should be enrolled, or additional verification is required. The <a href="#transaction-state">transaction state</a> of the response depends on the user’s status, group memberships and assigned policies.</p>

<p>The requests and responses vary depending on the application type, and whether a password expiration warning is sent:</p>

<ul>
  <li><a href="#primary-authentication-with-public-application">Primary Authentication with Public Application</a>—<a href="#request-example-for-primary-authentication-with-public-application">Request Example</a></li>
  <li><a href="#primary-authentication-with-trusted-application">Primary Authentication with Trusted Application</a>—<a href="#request-example-for-trusted-application">Request Example</a></li>
  <li><a href="#primary-authentication-with-activation-token">Primary Authentication with activationToken</a>—<a href="#request-example-for-activation-token">Request Example</a></li>
  <li><a href="#primary-authentication-with-password-expiration-warning">Primary Authentication with Password Expiration Warning</a>—<a href="#request-example-for-password-expiration-warning">Request Example</a></li>
</ul>

<blockquote>
  <p>You must first enable MFA factors and assign a valid <strong>Sign-On Policy</strong> to a user to enroll and/or verify a MFA factor during authentication.</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters-for-primary-authentication">Request Parameters for Primary Authentication</h4>

<p>As part of the authentication call either the username and password or the token parameter must be provided.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Param Type</th>
      <th style="text-align: left">DataType</th>
      <th style="text-align: left">Required</th>
      <th style="text-align: left">MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td style="text-align: left">User’s non-qualified short-name (e.g. dade.murphy) or unique fully-qualified login (e.g dade.murphy@example.com)</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td>password</td>
      <td style="text-align: left">User’s password credential</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td style="text-align: left">Optional state value that is persisted for the lifetime of the authentication transaction</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left">2048</td>
    </tr>
    <tr>
      <td>options</td>
      <td style="text-align: left">Opt-in features for the authentication transaction</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left"><a href="#options-object">Options Object</a></td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td>context</td>
      <td style="text-align: left">Provides additional context for the authentication transaction</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left"><a href="#context-object">Context Object</a></td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td>token</td>
      <td style="text-align: left">Token received as part of activation user request</td>
      <td style="text-align: left">Body</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">FALSE</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h5 id="options-object">Options Object</h5>

<p>The authentication transaction <a href="#transaction-state">state machine</a> can be modified via the following opt-in features:</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>multiOptionalFactorEnroll</td>
      <td>Transitions transaction back to <code class="highlighter-rouge">MFA_ENROLL</code> state after successful factor enrollment when additional optional factors are available for enrollment</td>
      <td>Boolean</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
    </tr>
    <tr>
      <td>warnBeforePasswordExpired</td>
      <td>Transitions transaction to <code class="highlighter-rouge">PASSWORD_WARN</code> state before <code class="highlighter-rouge">SUCCESS</code> if the user’s password is about to expire and within their password policy warn period</td>
      <td>Boolean</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 id="context-object">Context Object</h5>

<p>The context object allows <a href="#trusted-application">trusted web applications</a> such as an external portal to pass additional context for the authentication or recovery transaction.</p>

<blockquote>
  <p>Overriding context such as <code class="highlighter-rouge">deviceToken</code> is a highly privileged operation limited to trusted web applications and requires making authentication or recovery requests with a valid <em>administrator API token</em>.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>deviceToken</td>
      <td>A globally unique ID identifying the user’s client device or user agent</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td> </td>
      <td>32</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>You must always pass the same <code class="highlighter-rouge">deviceToken</code> for a user’s device with every authentication request for <strong>per-device</strong> or <strong>per-session</strong> Sign-On Policy factor challenges.  If the <code class="highlighter-rouge">deviceToken</code> is absent or does not match the previous <code class="highlighter-rouge">deviceToken</code>, the user will be challenged every-time instead of <strong>per-device</strong> or <strong>per-session</strong>.</p>
</blockquote>

<p>It is recommended that you generate a UUID or GUID for each client and persist the <code class="highlighter-rouge">deviceToken</code> as a persistent cookie or HTML5 localStorage item scoped to your web application’s origin.</p>

<h4 class="api api-response api-response-params" id="response-parameters">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p><code class="highlighter-rouge">401 Unauthorized</code> status code is returned for requests with invalid credentials, locked out accounts or access denied by sign-on policy.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><code class="highlighter-rouge">429 Too Many Requests</code> status code may be returned when the rate-limit is exceeded.</p>

<blockquote>
  <p>Authentication requests are aggressively rate-limited (e.g. 1 request per username/per second) for security purposes.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">429</span> <span class="ne">Too Many Requests</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Rate-Limit-Limit</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-Rate-Limit-Remaining</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-Rate-Limit-Reset</span><span class="p">:</span> <span class="s">1447534590</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API call exceeded rate limit due to too many requests."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeWaNHfOyQSES34-a2Dw6Phw"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-public-application">Primary Authentication with Public Application</h4>

<p>Authenticates a user with username/password credentials via a <a href="#public-application">public application</a></p>

<h5 class="api api-request api-request-example" id="request-example-for-primary-authentication-with-public-application">Request Example for Primary Authentication with Public Application</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": false
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-success">Response Example for Primary Authentication with Public Application (Success)</h5>

<p>Users with a valid password not assigned to a <strong>Sign-On Policy</strong> with additional verification requirements will successfully complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-invalid-credentials">Response Example for Primary Authentication with Public Application (Invalid Credentials)</h5>

<p><code class="highlighter-rouge">401 Unauthorized</code> status code is returned for requests with invalid credentials or when access is denied based on sign-on policy.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-locked-out">Response Example for Primary Authentication with Public Application (Locked Out)</h5>

<p>Primary authentication requests for a user with <code class="highlighter-rouge">LOCKED_OUT</code> status is conditional on the user’s password policy.  Password policies define whether to hide or show  lockout failures which disclose a valid user identifier to the caller.</p>

<h5 id="response-example-for-primary-authentication-with-public-application-and-hide-lockout-failures-default">Response Example for Primary Authentication with Public Application and Hide Lockout Failures (Default)</h5>

<p>If the user’s password policy is configured to <strong>hide lockout failures</strong>, a <code class="highlighter-rouge">401 Unauthorized</code> error is returned preventing information disclosure of a valid user identifier.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="response-example-for-primary-authentication-with-public-application-and-show-lockout-failures">Response Example for Primary Authentication with Public Application and Show Lockout Failures</h5>

<p>If the user’s password policy is configure to <strong>show lockout failures</strong>, the authentication transaction completes with <code class="highlighter-rouge">LOCKED_OUT</code> status.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCKED_OUT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unlock"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/unlock"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-and-expired-password">Response Example for Primary Authentication with Public Application and Expired Password</h5>

<p>User must <a href="#change-password">change their expired password</a> to complete the authentication transaction.</p>

<blockquote>
  <p>Users will be challenged for MFA (<code class="highlighter-rouge">MFA_REQUIRED</code>) before <code class="highlighter-rouge">PASSWORD_EXPIRED</code> if they have an active factor enrollment</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_EXPIRED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"changePassword"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/change_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-factor-challenge">Response Example for Primary Authentication with Public Application (Factor Challenge)</h5>

<p>User is assigned to a <strong>Sign-On Policy</strong> that requires additional verification and must <a href="#verify-factor">select and verify</a> a previously enrolled <a href="#factor-object">factor</a> by <code class="highlighter-rouge">id</code> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_REQUIRED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rsalhpMQVYKHZKXZJQEW"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/rsalhpMQVYKHZKXZJQEW/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostfm3hPNYSOIOIVTQWY"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
             </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opf3hkfocI4JTLAju0g4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opf3hkfocI4JTLAju0g4/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-primary-authentication-with-public-application-factor-enroll">Response Example for Primary Authentication with Public Application (Factor Enroll)</h5>

<p>User is assigned to a <strong>MFA Policy</strong> that requires enrollment during sign-on and must <a href="#enroll-factor">select a factor to enroll</a> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
               </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-trusted-application">Primary Authentication with Trusted Application</h4>

<p>Authenticates a user via a <a href="#trusted-application">trusted application</a> or proxy that overrides <a href="/docs/api/getting_started/design_principles.html#client-request-context">client request context</a>.</p>

<p>Note:</p>

<ul>
  <li>Specifying your own <code class="highlighter-rouge">deviceToken</code> is a highly privileged operation limited to trusted web applications and requires making authentication requests with a valid <em>API token</em>.</li>
  <li>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="/docs/api/getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-trusted-application">Request Example for Trusted Application</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": false
  },
  "context": {
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-trusted-application">Response Example for Trusted Application</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-activation-token">Primary Authentication with Activation Token</h4>

<p>Authenticates a user via a <a href="#trusted-application">trusted application</a> or proxy that overrides <a href="/docs/api/getting_started/design_principles.html#client-request-context">client request context</a>.</p>

<p>Note:</p>

<ul>
  <li>Specifying your own <code class="highlighter-rouge">deviceToken</code> is a highly privileged operation limited to trusted web applications and requires making authentication requests with a valid <em>API token</em>.</li>
  <li>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="/docs/api/getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-activation-token">Request Example for Activation Token</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "token": "o7AFoTGE9xjQiHQK6dAa"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-activation-token-success---user-with-password-no-mfa">Response Example for Activation Token (Success - User with Password, no MFA)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T21:42:30.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20111DuMTdPoBlMOqX5R_OAV3ku2bTWxP6wUIRT_jqkU6XTvOsJLmDq"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-activation-token-success---user-with-password-and-configured-mfa">Response Example for Activation Token (Success - User with Password and Configured MFA)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00bMktAiPaI0Jo97bpiKxEw7drTgtukJKs33abrSpb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T21:49:09.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"question"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"questions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u1nehnZ6qp4Qy8G0g4/factors/questions"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"GET"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GOOGLE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GOOGLE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:hardware"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YUBICO"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YUBICO"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_SETUP"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-activation-token-success---user-without-password">Response Example for Activation Token (Success - User Without Password)</h5>

<p>In the case where the user was created without credentials the response will trigger the workflow to <a href="#change-password">set the user’s password</a>. After the password is configured, depending on the MFA setting, the workflow continues with MFA enrollment or a successful authentication completes.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"005Oj4_rx1yAYP2MFNobMXlM2wJ3QEyzgifBd_T6Go"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T21:35:47.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_RESET"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_ACTIVATION"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resetPassword"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/reset_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-activation-token-failure---invalid-or-expired-token">Response Example for Activation Token (Failure - Invalid or Expired Token)</h5>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oae2fYYJmkuTg-NyozqBkb3sw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-password-expiration-warning">Primary Authentication with Password Expiration Warning</h4>

<p>Authenticates a user with a password that is about to expire.  The user should <a href="#change-password">change their password</a> to complete the authentication transaction but may skip.</p>

<p>Note:</p>

<ul>
  <li>The <code class="highlighter-rouge">warnBeforePasswordExpired</code> option must be explicitly specified as <code class="highlighter-rouge">true</code> to allow the authentication transaction to transition to <code class="highlighter-rouge">PASSWORD_WARN</code> status.</li>
  <li>Non-expired passwords successfully complete the authentication transaction if this option is omitted or is specified as <code class="highlighter-rouge">false</code>.</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-password-expiration-warning">Request Example for Password Expiration Warning</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": true
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-password-expiration-warning">Response Example for Password Expiration Warning</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_WARN"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"changePassword"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/change_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"skip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="step-up-authentication">Step-up Authentication</h3>

<p><a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></p>

<p>Note:</p>

<ul>
  <li>This endpoint is currently supported only for SAML-based apps.</li>
  <li>You must first enable custom login page for the application before using this API.</li>
</ul>

<p>Every step-up transaction starts with user accessing an application. 
If step-up authentication is required, Okta redirects the user to the custom login page with state token as a request parameter.</p>

<p>For example, if the custom login page is set as <strong>https://login.example.com</strong>
then Okta will redirect to <strong>https://login.example.com?stateToken=</strong>00BClWr4T-mnIqPV8dHkOQlwEIXxB4LLSfBVt7BxsM.
To determine the next step, check the <a href="#get-transaction-state">state of the transaction</a>.</p>

<ul>
  <li><a href="#step-up-authentication-without-okta-session">Step-up Authentication without Okta session</a></li>
  <li><a href="#step-up-authentication-with-okta-session">Step-up Authentication with Okta session</a></li>
</ul>

<h4 id="step-up-authentication-without-okta-session">Step-up Authentication Without Okta Session</h4>

<h5 class="api api-request api-request-example" id="request-example-for-step-up-authentication-without-okta-session-get-transaction-state">Request Example for Step-up Authentication Without Okta Session (Get Transaction State)</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
   "stateToken":"00BClWr4T-mnIqPV8dHkOQlwEIXxB4LLSfBVt7BxsM"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-step-up-authentication-without-okta-session">Response Example for Step-up Authentication Without Okta Session</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00BClWr4T-mnIqPV8dHkOQlwEIXxB4LLSfBVt7BxsM"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"SESSION_STEP_UP"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2017-05-30T22:51:37.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"UNAUTHENTICATED"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"target"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"APP"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"Salesforce.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/assets/img/logos/salesforce_logo.dbd7e0b4de118a1dae1c39d60a3c30e5.png"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"authenticate"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example--for-step-up-authentication-without-okta-session-perform-primary-authentication">Request Example  for Step-up Authentication Without Okta Session (Perform Primary Authentication)</h5>

<p>Primary authentication has to be completed by using the value of <strong>stateToken</strong> request parameter passed to custom login page.</p>

<blockquote>
  <p>Okta Sign-On Policy and the related App Sign-On Policy will be evaluated after successful primary authentication.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
   "stateToken":"00BClWr4T-mnIqPV8dHkOQlwEIXxB4LLSfBVt7BxsM",
   "username": "dade.murphy@example.com",
   "password": "correcthorsebatterystaple"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-step-up-authentication-without-okta-session-when-mfa-isnt-required">Response Example for Step-up Authentication Without Okta Session When MFA Isn’t Required</h5>

<blockquote>
  <p>Sign in to the app by following the next link relation.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00quAZYqYjXg9DZhS5UzE1wrJuQ6KKb_kzOeH7OGB5"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"SESSION_STEP_UP"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2017-05-30T23:19:40.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"target"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"APP"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"Salesforce.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/assets/img/logos/salesforce_logo.dbd7e0b4de118a1dae1c39d60a3c30e5.png"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"original"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/login/step-up/redirect?stateToken=00quAZYqYjXg9DZhS5UzE1wrJuQ6KKb_kzOeH7OGB5"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="step-up-authentication-with-okta-session">Step-up authentication with Okta Session</h4>

<h5 class="api api-request api-request-example" id="request-example-to-get-transaction-state-for-step-up-authentication-with-okta-session">Request Example to Get Transaction State for Step-up authentication with Okta Session</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
   "stateToken":"00BClWr4T-mnIqPV8dHkOQlwEIXxB4LLSfBVt7BxsM"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-factor-enroll-for-step-up-authentication-with-okta-session">Response Example for Factor Enroll for Step-up authentication with Okta Session</h5>

<p>User is assigned to an MFA Policy that requires enrollment during sign-on and must <a href="#enroll-factor">select a factor to enroll</a> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00zEfSRIpELrl87ndYiHNkvOEbyEPrBmTYuf9dsGLl"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"SESSION_STEP_UP"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2017-05-30T22:58:09.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factors"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"enroll"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                     </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                        </span><span class="s2">"POST"</span><span class="w">
                     </span><span class="p">]</span><span class="w">
                  </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"NOT_SETUP"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"target"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"APP"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"Salesforce.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/assets/img/logos/salesforce_logo.dbd7e0b4de118a1dae1c39d60a3c30e5.png"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-factor-challenge-for-step-up-authentication-with-okta-session">Response Example for Factor Challenge for Step-up authentication with Okta Session</h5>

<p>User is assigned to a Sign-On Policy or App Sign-On Policy that requires additional verification and must <a href="#verify-factor">select and verify</a> a previously enrolled <a href="#factor-object">factor</a> by <code class="highlighter-rouge">id</code> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00POAgFjELRueYUC1p7GFAmrm32EQa2HXw0_YssJ5J"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"SESSION_STEP_UP"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2017-05-30T23:07:00.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_REQUIRED"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factors"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"smsph8F1esz8LlSjo0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="s2">"+1 XXX-XXX-3161"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"verify"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/smsph8F1esz8LlSjo0g3/verify"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                     </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                        </span><span class="s2">"POST"</span><span class="w">
                     </span><span class="p">]</span><span class="w">
                  </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"policy"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">1440</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"target"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"APP"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"Salesforce.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/assets/img/logos/salesforce_logo.dbd7e0b4de118a1dae1c39d60a3c30e5.png"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-after-authentication-and-mfa-are-complete-for-step-up-authentication-with-okta-session">Response Example After Authentication and MFA are Complete for Step-up authentication with Okta Session</h5>

<blockquote>
  <p>Sign in to the app by following the next link relation.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00quAZYqYjXg9DZhS5UzE1wrJuQ6KKb_kzOeH7OGB5"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"SESSION_STEP_UP"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2017-05-30T23:19:40.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2017-03-29T21:37:25.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"target"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"APP"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"Salesforce.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/assets/img/logos/salesforce_logo.dbd7e0b4de118a1dae1c39d60a3c30e5.png"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"original"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/login/step-up/redirect?stateToken=00quAZYqYjXg9DZhS5UzE1wrJuQ6KKb_kzOeH7OGB5"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="change-password">Change Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> api/v1/authn/credentials/change_password</span></p>

<p>This operation changes a user’s password by providing the existing password and the new password password for authentication transactions with either the <code class="highlighter-rouge">PASSWORD_EXPIRED</code> or <code class="highlighter-rouge">PASSWORD_WARN</code> state.</p>

<ul>
  <li>A user <em>must</em> change their expired password for an authentication transaction with <code class="highlighter-rouge">PASSWORD_EXPIRED</code> status to successfully complete the transaction.</li>
  <li>A user <em>may</em> opt-out of changing their password (skip) when the transaction has a <code class="highlighter-rouge">PASSWORD_WARN</code> status.</li>
</ul>

<h4 class="api api-request api-request-params" id="request-parameters-for-change-password">Request Parameters for Change Password</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>oldPassword</td>
      <td>User’s current password that is expired or about to expire</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>New password for user</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-for-change-password">Response Parameters for Change Password</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">oldPassword</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update of credentials failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeYx8fd_-VQdONMI5OYcqoqw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oldPassword: The credentials provided were incorrect."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If the <code class="highlighter-rouge">newPassword</code> does not meet password policy requirements, you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The password does meet the complexity requirements of the current password policy."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuNNAquYEQkWFnUVG86Abbw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-change-password">Request Example for Change Password</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "oldPassword": "correcthorsebatterystaple",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/change_password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-change-password">Response Example for Change Password</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="multifactor-authentication-operations">Multifactor Authentication Operations</h2>

<p>You can enroll, activate, manage, and verify factors inside the authentication context with <code class="highlighter-rouge">/api/v1/authn/factors</code>.</p>

<blockquote>
  <p>You can enroll, manage, and verify factors outside the authentication context with <a href="factors.html#factor-verification-operations"><code class="highlighter-rouge">/api/v1/users/:uid/factors/</code></a>.</p>
</blockquote>

<h3 class="api api-operation" id="enroll-factor">Enroll Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors</span></p>

<p>Enrolls a user with a <a href="factors.html#supported-factors-for-providers">factor</a> assigned by their <strong>MFA Policy</strong>.</p>

<ul>
  <li><a href="#enroll-okta-security-question-factor">Enroll Okta Security Question Factor</a></li>
  <li><a href="#enroll-okta-sms-factor">Enroll Okta SMS Factor</a></li>
  <li><a href="#enroll-okta-call-factor">Enroll Okta Call Factor</a></li>
  <li><a href="#enroll-okta-verify-totp-factor">Enroll Okta Verify TOTP Factor</a></li>
  <li><a href="#enroll-okta-verify-push-factor">Enroll Okta Verify Push Factor</a></li>
  <li><a href="#enroll-google-authenticator-factor">Enroll Google Authenticator Factor</a></li>
  <li><a href="#enroll-rsa-securid-factor">Enroll RSA SecurID Factor</a></li>
  <li><a href="#enroll-symantec-vip-factor">Enroll Symantec VIP Factor</a></li>
  <li><a href="#enroll-yubikey-factor">Enroll YubiKey Factor</a></li>
  <li><a href="#enroll-duo-factor">Enroll Duo Factor</a></li>
  <li><a href="#enroll-u2f-factor">Enroll U2F Factor</a></li>
</ul>

<blockquote>
  <p>This operation is only available for users that have not previously enrolled a factor and have transitioned to the <code class="highlighter-rouge">MFA_ENROLL</code> <a href="#transaction-state">state</a>.</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters-for-enroll-factor">Request Parameters for Enroll Factor</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td>Body</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td>Body</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors-for-providers">supported factor</a></td>
      <td>Body</td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-for-enroll-factor">Response Parameters for Enroll Factor</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<blockquote>
  <p>Some <a href="factors.html#factor-type">factor types</a> require <a href="#activate-factor">activation</a> to complete the enrollment process.  The <a href="#transaction-state">authentication transaction</a> will transition to <code class="highlighter-rouge">MFA_ENROLL_ACTIVATE</code> if a factor requires activation.</p>
</blockquote>

<h4 class="api api-operation" id="enroll-okta-security-question-factor">Enroll Okta Security Question Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">question</code> factor and <a href="factors.html#question-profile">question profile</a>.</p>

<blockquote>
  <p>Security Question factor does not require activation and is <code class="highlighter-rouge">ACTIVE</code> after enrollment</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-okta-security-question-factor">Request Example for Enroll Okta Security Question Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "question",
  "provider": "OKTA",
  "profile": {
    "question": "disliked_food",
    "answer": "mayonnaise"
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-okta-security-question-factor">Response Example for Enroll Okta Security Question Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-sms-factor">Enroll Okta SMS Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">sms</code> factor and an <a href="factors.html#sms-profile">SMS profile</a>.  A text message with an OTP is sent to the device during enrollment and must be <a href="#activate-sms-factor">activated</a> by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-okta-sms-factor">Request Example for Enroll Okta SMS Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "sms",
  "provider": "OKTA",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-okta-sms-factor">Response Example for Enroll Okta SMS Factor</h5>

<blockquote>
  <p>Use the <code class="highlighter-rouge">resend</code> link to send another OTP if user doesn’t receive the original activation SMS OTP.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mbl198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-call-factor">Enroll Okta Call Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">call</code> factor and a <a href="factors.html#call-profile">Call profile</a>.  A voice call with an OTP is sent to the device during enrollment and must be <a href="#activate-call-factor">activated</a> by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-okta-call-factor">Request Example for Enroll Okta Call Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "call",
  "provider": "OKTA",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-okta-call-factor">Response Example for Enroll Okta Call Factor</h5>

<blockquote>
  <p>Use the <code class="highlighter-rouge">resend</code> link to send another OTP if user doesn’t receive the original activation Voice Call OTP.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf198rKSEWOSKRIVIFT/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf198rKSEWOSKRIVIFT/lifecycle/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-verify-totp-factor">Enroll Okta Verify TOTP Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<blockquote>
  <p>This API implements <a href="https://tools.ietf.org/html/rfc6238">the TOTP standard</a>, which is used by apps like Okta Verify and Google Authenticator.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-okta-verify-totp-factor">Request Example for Enroll Okta Verify TOTP Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token:software:totp",
  "provider": "OKTA"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-okta-verify-totp-factor">Response Example for Enroll Okta Verify TOTP Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostf2xjtDKWFPZIKYDZV"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KBMTM32UJZSXQ2DW"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/ostf2xjtDKWFPZIKYDZV/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-verify-push-factor">Enroll Okta Verify Push Factor</h4>

<p>Enrolls a user with the Okta verify <code class="highlighter-rouge">push</code> factor. The factor must be <a href="#activate-push-factor">activated on the device</a> by scanning the QR code or visiting the activation link sent via email or sms.</p>

<p>Use the published activation links to embed the QR code or distribute an activation <code class="highlighter-rouge">email</code> or <code class="highlighter-rouge">sms</code>.</p>

<blockquote>
  <p>This API implements <a href="https://tools.ietf.org/html/rfc6238">the TOTP standard</a>, which is used by apps like Okta Verify and Google Authenticator.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-okta-verify-push-factor">Request Example for Enroll Okta Verify Push Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "push",
  "provider": "OKTA"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-okta-verify-push-factor">Response Example for Enroll Okta Verify Push Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-google-authenticator-factor">Enroll Google Authenticator Factor</h4>

<p>Enrolls a user with the Google <code class="highlighter-rouge">token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-google-authenticator-factor">Request Example for Enroll Google Authenticator Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token:software:totp",
  "provider": "GOOGLE"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-google-authenticator-factor">Response Example for Enroll Google Authenticator Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostf2xjtDKWFPZIKYDZV"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GOOGLE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KYCRM33UJZSXQ2DW"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/uftm3iHSGFQXHCUSDAND/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/uftm3iHSGFQXHCUSDAND/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-rsa-securid-factor">Enroll RSA SecurID Factor</h4>

<p>Enrolls a user with a RSA SecurID factor and a <a href="factors.html#token-profile">token profile</a>.  RSA tokens must be verified with the <a href="factors.html#factor-verification-object">current pin+passcode</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-rsa-securid-factor">Request Example for Enroll RSA SecurID Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token",
  "provider": "RSA",
  "profile": {
    "credentialId": "dade.murphy@example.com"
  },
  "passCode": "5275875498"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-rsa-seurid-factor">Response Example for Enroll RSA SeurID Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-symantec-vip-factor">Enroll Symantec VIP Factor</h4>

<p>Enrolls a user with a Symantec VIP factor and a <a href="factors.html#token-profile">token profile</a>.  Symantec tokens must be verified with the <a href="factors.html#factor-verification-object">current and next passcodes</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-symantec-vip-factor">Request Example for Enroll Symantec VIP Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token",
  "provider": "SYMANTEC",
  "profile": {
    "credentialId": "VSMT14393584"
  },
  "passCode": "875498",
  "nextPassCode": "678195"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-symantec-vip-factor">Response Example for Enroll Symantec VIP Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-yubikey-factor">Enroll YubiKey Factor</h4>

<p>Enrolls a user with a Yubico factor (YubiKey).  YubiKeys must be verified with the <a href="factors.html#factor-verification-object">current passcode</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-yubikey-factor">Request Example for Enroll YubiKey Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "token:hardware",
  "provider": "YUBICO",
  "passCode": "cccccceukngdfgkukfctkcvfidnetljjiknckkcjulji"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-yubikey-factor">Response Example for Enroll YubiKey Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-duo-factor">Enroll Duo Factor</h4>

<p>The enrollment process starts with an enrollment request to Okta, then continues with the Duo widget that is embedded in the page. The page needs to create an iframe with the name <code class="highlighter-rouge">duo_iframe</code> (described <a href="https://duo.com/docs/duoweb#3.-show-the-iframe">in Duo documentation</a>) to host the widget. The script address is received in the response object in _embedded.factor._embedded._links.script object. The information to initialize the Duo object is taken from _embedded.factor._embedded.activation object as it is shown in the <a href="#full-page-example-for-duo-enrollment">full example</a>. In order to maintain the link between Duo and Okta the stateToken must be passed back when Duo calls the callback. This is done by populating the hidden element in the “duo_form” as it is described <a href="https://duo.com/docs/duoweb#passing-additional-post-arguments-with-the-signed-response">here</a>. After Duo enrollment and verification is done, the Duo script makes a call back to Okta. To complete the authentication process, make a call using <a href="#activation-poll-request-example">the poll link</a> to get session token and verify successful state.</p>

<h5 class="api api-request api-request-example" id="request-example-for-enroll-duo-factor">Request Example for Enroll Duo Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "web",
  "provider": "DUO",
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-enroll-duo-factor">Response Example for Enroll Duo Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00BlN4kOtm7wNxuM8nuXsOK1PFXBkvvTH-buJUrgWX"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T13:14:52.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00uku2SnbUX49SAGb0g3"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:07:51.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"dsflnpo99zpfMyaij0g3"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"web"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"activation"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"host"</span><span class="p">:</span><span class="s2">"api-your-host.duosecurity.com"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"signature"</span><span class="p">:</span><span class="s2">"TX|...your-signature"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
                      </span><span class="nt">"complete"</span><span class="p">:{</span><span class="w">
                          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback"</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                                  </span><span class="s2">"POST"</span><span class="w">
                             </span><span class="p">]</span><span class="w">
                          </span><span class="p">}</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="nt">"script"</span><span class="p">:{</span><span class="w">
                          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/js/sections/duo/Duo-Web-v2.js"</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"text/javascript; charset=utf-8"</span><span class="w">
                      </span><span class="p">}</span><span class="w">
                  </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                   </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="full-page-example-for-duo-enrollment">Full Page Example for Duo enrollment</h4>
<p>In this example we will put all the elements together in html page.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="c">&lt;!--
            The Duo SDK will automatically bind to this iFrame and populate it for us.
            See https://www.duosecurity.com/docs/duoweb for more info.
         --&gt;</span>
        <span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">"duo_iframe"</span> <span class="na">width=</span><span class="s">"620"</span> <span class="na">height=</span><span class="s">"330"</span> <span class="na">frameborder=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
        <span class="c">&lt;!--
            The Duo SDK will automatically bind to this form and submit it for us.
            See https://www.duosecurity.com/docs/duoweb for more info.
         --&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"duo_form"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- The state token is required here (in order to bind anonymous request back into Auth API) --&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"stateToken"</span> <span class="na">value=</span><span class="s">'00BlN4kOtm7wNxuM8nuXsOK1PFXBkvvTH-buJUrgWX'</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/form&gt;</span>

        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://{yourOktaDomain}.com/js/sections/duo/Duo-Web-v2.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

        <span class="c">&lt;!-- The host, sig_request, and post_action values will be given via the Auth API --&gt;</span>
        <span class="nt">&lt;script&gt;</span>
            <span class="nx">Duo</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
                <span class="s1">'host'</span><span class="p">:</span> <span class="s1">'api-your-host.duosecurity.com'</span><span class="p">,</span>
                <span class="s1">'sig_request'</span><span class="p">:</span> <span class="s1">'TX|...your-signature'</span><span class="p">,</span>
                <span class="s1">'post_action'</span><span class="p">:</span> <span class="s1">'https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback'</span>
            <span class="p">});</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<h5 class="api api-response api-request-example" id="activation-poll-request-example">Activation Poll Request Example</h5>
<p>The poll is to verify successful authentication and to obtain session token.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="k">}</span><span class="s2">/lifecycle/activate/poll"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activation-poll-response-example">Activation Poll Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T13:37:42.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"20111zMXPaEe_lEw7pg2Ub810HDkpBwzSVBEPBRpA87LH5sW3Jj35_x"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-u2f-factor">Enroll U2F Factor</h4>

<p><a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></p>

<p>Enrolls a user with a U2F factor.  The enrollment process starts with getting an <code class="highlighter-rouge">appId</code> and <code class="highlighter-rouge">nonce</code> from Okta and using those to get registration information from the U2F key using the U2F javascript API.</p>

<h5 class="api api-request api-request-example" id="enroll-u2f-request-example">Enroll U2F Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "u2f",
  "provider": "FIDO",
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="enroll-u2f-response-example">Enroll U2F Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00s7Yewe3Z4aujPLpR4qW4y1hMKzAbyXK5LSKJRW2G"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-05T19:40:53.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-28T23:27:57.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first.last@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fuf8y1y14jaygfX5K0h7"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u2f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"U2F_V2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"appId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s-NaltFnye-xNsJeAhnN"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"timeoutSeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/fuf8y1y14jaygfX5K0h7/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="activate-factor">Activate Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/lifecycle/activate</span></p>

<p>The <code class="highlighter-rouge">sms</code>,<code class="highlighter-rouge">call</code> and <code class="highlighter-rouge">token:software:totp</code> <a href="factors.html#factor-type">factor types</a> require activation to complete the enrollment process.</p>

<ul>
  <li><a href="#activate-totp-factor">Activate TOTP Factor</a></li>
  <li><a href="#activate-sms-factor">Activate SMS Factor</a></li>
  <li><a href="#activate-call-factor">Activate Call Factor</a></li>
  <li><a href="#activate-push-factor">Activate Push Factor</a></li>
  <li><a href="#activate-u2f-factor">Activate U2F Factor</a>  <a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></li>
</ul>

<h4 class="api api-operation" id="activate-totp-factor">Activate TOTP Factor</h4>

<p>Activates a <code class="highlighter-rouge">token:software:totp</code> factor by verifying the OTP.</p>

<blockquote>
  <p>This API implements <a href="https://tools.ietf.org/html/rfc6238">the TOTP standard</a>, which is used by apps like Okta Verify and Google Authenticator.</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters-for-activate-totp-factor">Request Parameters for Activate TOTP Factor</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a>  for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP generated by device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-for-activate-totp-factor">Response Parameters for Activate TOTP Factor</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-request api-request-example" id="activate-totp-request-example">Activate TOTP Request Example</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "123456"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostf1fmaMGJLMNGNLIVG/lifecycle/activate"</span>
</code></pre>
</div>

<h4 class="api api-response api-response-example" id="activate-totp-response-example">Activate TOTP Response Example</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-sms-factor">Activate SMS Factor</h4>

<p>Activates a <code class="highlighter-rouge">sms</code> factor by verifying the OTP.  The request and response is identical to <a href="#activate-totp-factor">activating a TOTP factor</a></p>

<h5 class="api api-request api-request-params" id="activate-sms-factor-request-parameters">Activate SMS Factor Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to mobile device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="activate-sms-factor-response-parameters">Activate SMS Factor Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="activate-sms-factor-request-example">Activate SMS Factor Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "123456"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-sms-factor-response-example">Activate SMS Factor Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-call-factor">Activate Call Factor</h4>

<p>Activates a <code class="highlighter-rouge">call</code> factor by verifying the OTP.  The request and response is identical to <a href="#activate-totp-factor">activating a TOTP factor</a></p>

<h5 class="api api-request api-request-params" id="activate-call-factor-request-parameters">Activate Call Factor Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>Passcode received via the voice call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="activate-call-factor-response-parameters">Activate Call Factor Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="activate-call-factor-request-example">Activate Call Factor Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "12345"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-call-factor-response-example">Activate Call Factor Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-push-factor">Activate Push Factor</h4>

<p>Activation of <code class="highlighter-rouge">push</code> factors are asynchronous and must be polled for completion when the <code class="highlighter-rouge">factorResult</code> returns a <code class="highlighter-rouge">WAITING</code> status.</p>

<p>Activations have a short lifetime (minutes) and will <code class="highlighter-rouge">TIMEOUT</code> if they are not completed before the <code class="highlighter-rouge">expireAt</code> timestamp.  Use the published <code class="highlighter-rouge">activate</code> link to restart the activation process if the activation is expired.</p>

<h5 class="api api-request api-request-params" id="activate-push-factor-request-parameters">Activate Push Factor Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="activate-push-factor-response-parameters">Activate Push Factor Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<h5 class="api api-request api-request-example" id="activate-push-factor-request-example">Activate Push Factor Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-push-factor-response-example-waiting">Activate Push Factor Response Example (Waiting)</h5>

<blockquote>
  <p>Follow the the published <code class="highlighter-rouge">next</code> link to keep polling for activation completion</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-push-factor-response-example-success">Activate Push Factor Response Example (Success)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-push-factor-response-example-timeout">Activate Push Factor Response Example (Timeout)</h5>

<blockquote>
  <p>Follow the the published <code class="highlighter-rouge">activate</code> link to restart the activation process.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIMEOUT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIMEOUT"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"activate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u4vi0VX6U816Kl90g4/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="poll-for-push-factor-activation">Poll for Push Factor Activation</h5>

<p>After the push notification is sent to user’s device we need to know when the user completes the activation. This is done by polling the “poll” link.</p>

<h6 class="api api-request api-request-example" id="poll-for-push-request-example">Poll for Push Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="poll-for-push-response-example">Poll for Push Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-22T21:36:47.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-22T21:41:47.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/opfh52xcuft3J4uZc0g3/factors/opfn169oIx3k63Klh0g3/qr/20111huUFWDFTAeq_lFQKfKFS_rLABkE_pKgGl5PBUeLvJVmaIrWq5u"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="send-activation-links">Send Activation Links</h5>

<p>Sends an activation email or SMS when when the user is unable to scan the QR code provided as part of an Okta Verify transaction.
If for any reason the user can’t scan the QR code, they can use the link provided in email or SMS to complete the transaction.</p>

<blockquote>
  <p>The user must click the link from the same device as the one where the Okta Verify app is installed.</p>
</blockquote>

<h6 class="api api-request api-request-example" id="send-activation-links-request-example-email">Send Activation Links Request Example (Email)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span>
</code></pre>
</div>

<h6 class="api api-request api-request-example" id="send-activation-links-request-example-sms">Send Activation Links Request Example (SMS)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="send-activation-links-response-example">Send Activation Links Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-u2f-factor">Activate U2F Factor</h4>

<p><a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></p>

<p>Activation gets the registration information from the U2F token using the API and passes it to Okta.</p>

<h5 class="api api-response api-response-example" id="get-registration-information-from-u2f-token-by-calling-the-u2f-javascript-call">Get registration information from U2F token by calling the U2F Javascript call</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Get the u2f-api.js from https://github.com/google/u2f-ref-code/tree/master/u2f-gae-demo/war/js --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/u2f-api.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="c1">//use the appId from the activation object</span>
<span class="kd">var</span> <span class="nx">appId</span> <span class="o">=</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">appId</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">registerRequests</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">version</span><span class="p">:</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span> <span class="c1">//use the version from the activation object</span>
    <span class="na">challenge</span><span class="p">:</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">nonce</span> <span class="c1">//use the nonce from the activation object</span>
    <span class="p">}];</span>
<span class="nx">u2f</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">appId</span><span class="p">,</span> <span class="nx">registerRequests</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Error from U2F platform</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	  <span class="c1">//Get the registrationData from the callback result</span>
	  <span class="kd">var</span> <span class="nx">registrationData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">registrationData</span><span class="p">;</span>

	  <span class="c1">//Get the clientData from the callback result</span>
	  <span class="kd">var</span> <span class="nx">clientData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">clientData</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<p>Activate a <code class="highlighter-rouge">u2f</code> factor by verifying the registration data and client data.</p>

<h5 class="api api-request api-request-params" id="activate-u2f-request-parameters">Activate U2F Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>registrationData</td>
      <td>base64 encoded registration data from U2F javascript call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>clientData</td>
      <td>base64 encoded client data from U2F javascript call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="activate-u2f-response-parameters">Activate U2F Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the registration nonce is invalid or if registration data is invalid, you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="activate-u2f-request-example">Activate U2F Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "registrationData": "BQTl3Iu9V4caCvcI44pmYwIehICWyboL_J2Wl5FA6ZGNx9qT11Df-rHJIy9iP6MSJ_qAaKqdq8O0XVqBG46p6qbpQLIb471thYthrQiW9955tNdORCEhvZX9iYNI1peNlETOr7Qx_PgIZ6Ein6aB3wH9JCTGgsdd4JX3cYixbj1v9W8wggJEMIIBLqADAgECAgRVYr6gMAsGCSqGSIb3DQEBCzAuMSwwKgYDVQQDEyNZdWJpY28gVTJGIFJvb3QgQ0EgU2VyaWFsIDQ1NzIwMDYzMTAgFw0xNDA4MDEwMDAwMDBaGA8yMDUwMDkwNDAwMDAwMFowKjEoMCYGA1UEAwwfWXViaWNvIFUyRiBFRSBTZXJpYWwgMTQzMjUzNDY4ODBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABEszH3c9gUS5mVy-RYVRfhdYOqR2I2lcvoWsSCyAGfLJuUZ64EWw5m8TGy6jJDyR_aYC4xjz_F2NKnq65yvRQwmjOzA5MCIGCSsGAQQBgsQKAgQVMS4zLjYuMS40LjEuNDE0ODIuMS41MBMGCysGAQQBguUcAgEBBAQDAgUgMAsGCSqGSIb3DQEBCwOCAQEArBbZs262s6m3bXWUs09Z9Pc-28n96yk162tFHKv0HSXT5xYU10cmBMpypXjjI-23YARoXwXn0bm-BdtulED6xc_JMqbK-uhSmXcu2wJ4ICA81BQdPutvaizpnjlXgDJjq6uNbsSAp98IStLLp7fW13yUw-vAsWb5YFfK9f46Yx6iakM3YqNvvs9M9EUJYl_VrxBJqnyLx2iaZlnpr13o8NcsKIJRdMUOBqt_ageQg3ttsyq_3LyoNcu7CQ7x8NmeCGm_6eVnZMQjDmwFdymwEN4OxfnM5MkcKCYhjqgIGruWkVHsFnJa8qjZXneVvKoiepuUQyDEJ2GcqvhU2YKY1zBGAiEAxWDh5F7vr0AoEsi3N-uR6KR3ADXlZnQgzROUTVhff8ICIQCiUUG1FkQ9e8PW1dhRk6tjHjL22KZ9JqBrTfpytC5jaQ==",
  "clientData": "eyAiY2hhbGxlbmdlIjogImFYLS1wMTlibldWcUlnY25HU0hLIiwgIm9yaWdpbiI6ICJodHRwczpcL1wvc25hZ2FuZGxhLm9rdGFwcmV2aWV3LmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmZpbmlzaEVucm9sbG1lbnQiIH0=",
  "stateToken": "00MBkDX0vBddsuU1VnDsa7-qqIOi7g51YLNQEen1hi"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/fuf1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activate-u2f-response-example">Activate U2F Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="verify-factor">Verify Factor</h3>

<p>Verifies an enrolled factor for an authentication transaction with the <code class="highlighter-rouge">MFA_REQUIRED</code> or <code class="highlighter-rouge">MFA_CHALLENGE</code> <a href="#transaction-state">state</a></p>

<ul>
  <li><a href="#verify-security-question-factor">Verify Security Question Factor</a></li>
  <li><a href="#verify-sms-factor">Verify SMS Factor</a></li>
  <li><a href="#verify-totp-factor">Verify TOTP Factor</a></li>
  <li><a href="#verify-push-factor">Verify Push Factor</a></li>
  <li><a href="#verify-duo-factor">Verify Duo Factor</a></li>
  <li><a href="#verify-u2f-factor">Verify U2F Factor</a></li>
  <li><a href="#verify-call-factor">Verify Call Factor</a></li>
</ul>

<blockquote>
  <p>If the sign-on (or app sign-on) <a href="#remember-device-policy-object">policy</a> allows remembering the device, then the end user should be prompted to choose whether the current device should be remembered. This helps reduce the number of times the user is prompted for MFA on the current device. The user’s choice should be passed to Okta using the request parameter <code class="highlighter-rouge">rememberDevice</code> to the verify endpoint. The default value of <code class="highlighter-rouge">rememberDevice</code> parameter is <code class="highlighter-rouge">false</code>.</p>
</blockquote>

<h4 class="api api-operation" id="verify-security-question-factor">Verify Security Question Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an answer to a <code class="highlighter-rouge">question</code> factor.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-security-question-factor">Request Parameters for Verify Security Question Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to security question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-verify-security-question-factor">Response Parameters for Verify Security Question Factor</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">answer</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-verify-security-question-factor">Request Example for Verify Security Question Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "answer": "mayonnaise"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ufs1pe3ISGKGPYKXRBKK/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-security-question-factor">Response Example for Verify Security Question Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ZD3Z7ixppspFljXV2t_Z6GfrYzqG7cDJ8reWo2hy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-sms-factor">Verify SMS Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-sms-factor">Request Parameters for Verify SMS Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>If you omit <code class="highlighter-rouge">passCode</code> in the request a new OTP will be sent to the device, otherwise the request will attempt to verify the <code class="highlighter-rouge">passCode</code></p>
</blockquote>

<h4 class="api api-response api-response-params" id="response-parameters-for-verify-sms-factor">Response Parameters for Verify SMS Factor</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="send-sms-challenge-otp">Send SMS Challenge (OTP)</h5>

<p>Omit <code class="highlighter-rouge">passCode</code> in the request to sent an OTP to the device.</p>

<h6 class="api api-request api-request-example" id="request-example-for-send-sms-challenge-otp">Request Example for Send SMS Challenge (OTP)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-for-send-sms-challenge-otp">Response Example for Send SMS Challenge (OTP)</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="verify-sms-challenge-otp">Verify SMS Challenge (OTP)</h5>

<p>Specify <code class="highlighter-rouge">passCode</code> in the request to verify the factor.</p>

<h6 class="api api-request api-request-example" id="request-example-for-verify-sms-challenge-otp">Request Example for Verify SMS Challenge (OTP)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "657866"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-for-verify-sms-challenge-otp">Response Example for Verify SMS Challenge (OTP)</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-totp-factor">Verify TOTP Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an OTP for a <code class="highlighter-rouge">token:software:totp</code> factor.</p>

<blockquote>
  <p>This API implements <a href="https://tools.ietf.org/html/rfc6238">the TOTP standard</a>, which is used by apps like Okta Verify and Google Authenticator.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-totp-factor">Request Parameters for Verify TOTP Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-verify-totp-factor">Response Parameters for Verify TOTP Factor</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 class="api api-request api-request-example" id="request-example-for-verify-totp-factor">Request Example for Verify TOTP Factor</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "657866"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-for-verify-totp-factor">Response Example for Verify TOTP Factor</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-push-factor">Verify Push Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Sends an asynchronous push notification (challenge) to the device for the user to approve or reject.  The <code class="highlighter-rouge">factorResult</code> for the transaction will have a result of <code class="highlighter-rouge">WAITING</code>, <code class="highlighter-rouge">SUCCESS</code>, <code class="highlighter-rouge">REJECTED</code>, or <code class="highlighter-rouge">TIMEOUT</code>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-push-factor">Request Parameters for Verify Push Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-request api-request-example" id="request-example-for-verify-push-factor">Request Example for Verify Push Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ufs1pe3ISGKGPYKXRBKK/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-waiting">Response Example (Waiting)</h5>

<blockquote>
  <p>Keep polling authentication transactions with <code class="highlighter-rouge">WAITING</code> result until the challenge completes or expires.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-approved">Response Example (Approved)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9xx"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-rejected">Response Example (Rejected)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REJECTED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-timeout">Response Example (Timeout)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-duo-factor">Verify Duo Factor</h4>

<p>Verification of the Duo factor is implemented as an integration with Duo widget. The process is very similar to the  <a href="#full-page-example-for-duo-enrollment">enrollment</a> where the widget is embedded in an iframe - “duo_iframe”. Verification starts with request to the Okta API, then continues with a Duo widget that handles the actual verification. We need to pass the state token as hidden object in “duo_form”. The authentication completes with call to <a href="#verification-poll-request-example">poll link</a> to verify the state and obtain session token.</p>

<h5 class="api api-request api-request-example" id="request-example-for-verify-duo-factor">Request Example for Verify Duo Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-duo-factor">Response Example for Verify Duo Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00CzoxFVe4R2nv0hTxm32r1kayfrrOkuxcE2rfINwZ"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:13:58.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"dsflnpo99zpfMyaij0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"web"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"verification"</span><span class="p">:{</span><span class="w">
                    </span><span class="nt">"host"</span><span class="p">:</span><span class="s2">"api-your-host.duosecurity.com"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"signature"</span><span class="p">:</span><span class="s2">"TX|...your-signature"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
                        </span><span class="nt">"complete"</span><span class="p">:{</span><span class="w">
                            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback"</span><span class="p">,</span><span class="w">
                            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                                    </span><span class="s2">"POST"</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nt">"script"</span><span class="p">:{</span><span class="w">
                            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/js/sections/duo/Duo-Web-v2.js"</span><span class="p">,</span><span class="w">
                            </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"text/javascript; charset=utf-8"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"policy"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="sample-for-duo-iframe">Sample for Duo iFrame</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>...
<span class="c">&lt;!--
    The Duo SDK will automatically bind to this iFrame and populate it for us.
    See https://www.duosecurity.com/docs/duoweb for more info.
 --&gt;</span>
<span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">"duo_iframe"</span> <span class="na">width=</span><span class="s">"620"</span> <span class="na">height=</span><span class="s">"330"</span> <span class="na">frameborder=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
<span class="c">&lt;!--
    The Duo SDK will automatically bind to this form and submit it for us.
    See https://www.duosecurity.com/docs/duoweb for more info.
 --&gt;</span>
<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"duo_form"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- The state token is required here (in order to bind anonymous request back into Auth API) --&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"stateToken"</span> <span class="na">value=</span><span class="s">'00CzoxFVe4R2nv0hTxm32r1kayfrrOkuxcE2rfINwZ'</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://{yourOktaDomain}.com/js/sections/duo/Duo-Web-v2.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- The host, sig_request, and post_action values will be given via the Auth API --&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nx">Duo</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
        <span class="s1">'host'</span><span class="p">:</span> <span class="s1">'api-your-host.duosecurity.com'</span><span class="p">,</span>
        <span class="s1">'sig_request'</span><span class="p">:</span> <span class="s1">'TX|...your-signature'</span><span class="p">,</span>
        <span class="s1">'post_action'</span><span class="p">:</span> <span class="s1">'https://{yourOktaDomain}.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback'</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
...

</code></pre>
</div>

<h5 class="api api-request api-request-example" id="verification-poll-request-example">Verification Poll Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="verification-poll-response-example">Verification Poll Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:14:44.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"201111XUk7La2gw5r5PV1IhU4WSd0fV6mvNYdlJoeqjuyej7S83x3Hr"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-u2f-factor">Verify U2F Factor</h4>

<blockquote>
  <p>Verifying a U2F factor is <a href="/docs/api/getting_started/releases-at-okta.html">an  <a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a>  feature</a>.</p>
</blockquote>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-u2f-factor">Request Parameters for Verify U2F Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>clientData</td>
      <td>base64 encoded client data from the U2F token</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>signatureData</td>
      <td>base64 encoded signature data from the U2F token</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 id="start-verification-to-get-challenge-nonce">Start Verification to Get Challenge Nonce</h5>

<p>Verification of the U2F factor starts with getting the challenge nonce and U2F token details and then using the client-side
JavaScript API to get the signed assertion from the U2F token.</p>

<h5 class="api api-request api-request-example" id="request-example-for-verify-u2f-factor">Request Example for Verify U2F Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-u2f-factor">Response Example for Verify U2F Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00wCfuPA3qX3azDawSdPGFIhHuzbZX72Gv4bu_ew9d"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-06T01:32:39.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00u21eb3qyRDNNIKTGCW"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2015-10-28T23:27:57.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"fuf8y2l4n5mfH0UWe0h7"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"u2f"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"shvjvW2Fi2GtCJb33nm0105EISG9lf2Jg0jWl42URM6vtDH8-AhnoSKfpoHfAf0kJMaCx13glfdxiLFuPW_1bw"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"appId"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"version"</span><span class="p">:</span><span class="s2">"U2F_V2"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"challenge"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"tT1MI7XGzMu48Ivnz3vB"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"timeoutSeconds"</span><span class="p">:</span><span class="mi">20</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"policy"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/fuf8y2l4n5mfH0UWe0h7/verify"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="get-the-signed-assertion-from-the-u2f-token">Get the Signed Assertion from the U2F Token</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Get the u2f-api.js from https://github.com/google/u2f-ref-code/tree/master/u2f-gae-demo/war/js --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/u2f-api.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">challengeNonce</span> <span class="o">=</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">_embedded</span><span class="p">.</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">nonce</span><span class="p">;</span> <span class="c1">//use the nonce from the challenge object</span>
<span class="kd">var</span> <span class="nx">appId</span> <span class="o">=</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">appId</span><span class="p">;</span> <span class="c1">//use the appId from factor profile object</span>

<span class="c1">//Use the version and credentialId from factor profile object</span>
<span class="kd">var</span> <span class="nx">registeredKeys</span> <span class="o">=</span> <span class="p">[{</span><span class="na">version</span><span class="p">:</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span> <span class="na">keyHandle</span><span class="p">:</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">credentialId</span> <span class="p">}];</span>

<span class="c1">//Call the U2F javascript API to get signed assertion from the U2F token</span>
<span class="nx">u2f</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">appId</span><span class="p">,</span> <span class="nx">factorData</span><span class="p">.</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">nonce</span><span class="p">,</span> <span class="nx">registeredKeys</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Error from U2F platform</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	  <span class="c1">//Get the client data from callback result</span>
	  <span class="kd">var</span> <span class="nx">clientData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">clientData</span><span class="p">;</span>

    <span class="c1">//Get the signature data from callback result</span>
	  <span class="kd">var</span> <span class="nx">signatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">signatureData</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<h4 id="post-the-signed-assertion-to-okta-to-complete-verification">Post the Signed Assertion to Okta to Complete Verification</h4>

<h5 class="api api-request api-request-example" id="request-example-for-signed-assertion">Request Example for Signed Assertion</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}",
  "clientData":"eyAiY2hhbGxlbmdlIjogIlJ6ZDhQbEJEWUEyQ0VsbXVGcHlMIiwgIm9yaWdpbiI6ICJodHRwczpcL1wvc25hZ2FuZGxhLm9rdGFwcmV2aWV3LmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmdldEFzc2VydGlvbiIgfQ==",
  "signatureData":"AQAAAAEwRQIgRDEdmXr_jh1bEHtoUs1l7mMd-eUDO0eKqXKkrK5hUi0CIQDaVX030GgxVPr4RX3c4XgugildmHwDLwKRL0aMS3Sbpw==",
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-of-u2f-verification-example">Response of U2F Verification Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:14:44.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"201111XUk7La2gw5r5PV1IhU4WSd0fV6mvNYdlJoeqjuyej7S83x3Hr"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-call-factor">Verify Call Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-call-factor">Request Parameters for Verify Call Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
    </tr>
    <tr>
      <td>rememberDevice</td>
      <td>user’s decision to remember device</td>
      <td>URL</td>
      <td>Boolean</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>If you omit <code class="highlighter-rouge">passCode</code> in the request a new OTP will be sent to the device, otherwise the request will attempt to verify the <code class="highlighter-rouge">passCode</code></p>
</blockquote>

<h4 class="api api-response api-response-params" id="response-parameters-for-verify-call-factor">Response Parameters for Verify Call Factor</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="send-voice-call-challenge-otp">Send Voice Call Challenge (OTP)</h5>

<p>Omit <code class="highlighter-rouge">passCode</code> in the request to sent an OTP to the device.</p>

<h6 class="api api-request api-request-example" id="request-example-for-send-voice-call-challenge-otp">Request Example for Send Voice Call Challenge (OTP)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-for-send-voice-call-challenge-otp">Response Example for Send Voice Call Challenge (OTP)</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="verify-call-challenge-otp">Verify Call Challenge (OTP)</h5>

<p>Specify <code class="highlighter-rouge">passCode</code> in the request to verify the factor.</p>

<h6 class="api api-request api-request-example" id="request-example-for-verify-call-challenge">Request Example for Verify Call Challenge</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "65786"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-for-verify-call-challenge">Response Example for Verify Call Challenge</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h2 id="recovery-operations">Recovery Operations</h2>

<h3 class="api api-operation" id="forgot-password">Forgot Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/password</span></p>

<p>Starts a new password recovery transaction for a given user and issues a <a href="#recovery-token">recovery token</a> that can be used to reset a user’s password.</p>

<ul>
  <li><a href="#forgot-password-with-email-factor">Forgot Password with Email Factor</a></li>
  <li><a href="#forgot-password-with-sms-factor">Forgot Password with SMS Factor</a></li>
  <li><a href="#forgot-password-with-call-factor">Forgot Password with Call Factor</a></li>
  <li><a href="#forgot-password-with-trusted-application">Forgot Password with Trusted Application</a></li>
</ul>

<blockquote>
  <p>Self-service password reset (forgot password) must be permitted via the user’s assigned password policy to use this operation.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-for-forgot-password">Request Parameters for Forgot Password</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. dade.murphy) or unique fully-qualified login (dade.murphy@example.com)</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>Recovery factor to use for primary authentication</td>
      <td>Body</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code> or <code class="highlighter-rouge">Voice Call</code></td>
      <td>FALSE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td>2048</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>A valid <code class="highlighter-rouge">factorType</code> is required for requests without an API token with admin privileges. For more information, see <a href="#forgot-password-with-trusted-application">Forgot Password with Trusted Application</a>.</p>
</blockquote>

<p>The response is different, depending on whether the request is for a public application or a trusted application.</p>

<h5 class="api api-response api-response-params" id="response-parameters-for-public-application-for-forgot-password">Response Parameters for Public Application for Forgot Password</h5>

<p>The <a href="#recovery-transaction-model">Recovery Transaction Object</a> with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status for the new recovery transaction.</p>

<p>You will always receive a <a href="#recovery-transaction-model">Recovery Transaction</a> response even if the requested <code class="highlighter-rouge">username</code> is not a valid identifier to prevent information disclosure.</p>

<h5 id="response-parameters-for-trusted-application-for-forgot-password">Response Parameters for Trusted Application for Forgot Password</h5>

<p>The <a href="#recovery-transaction-model">Recovery Transaction Object</a> with an issued <code class="highlighter-rouge">recoveryToken</code> that can be distributed to the end user.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">username</code> requested is not valid.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recovery not allowed for unknown user."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaetVarN2dKS6ap08dq0k4n7A"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-email-factor">Forgot Password with Email Factor</h4>

<p>Starts a new password recovery transaction for the email factor:</p>

<ul>
  <li>You must specify a user identifier (<code class="highlighter-rouge">username</code>) but no password in the request.</li>
  <li>If the request is successful, Okta sends a recovery email asynchronously to the user’s primary and secondary email address with a <a href="#recovery-token">recovery token</a> so the user can complete the transaction.</li>
</ul>

<p>Primary authentication of a user’s recovery credential (e.g <code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code>) has not completed when this request is sent; the user is pending validation.</p>

<p>Okta provides security in the following ways:</p>

<ul>
  <li>Since the recovery email is distributed out-of-band and may be viewed on a different user agent or device, this operation does not return a <a href="#state-token">state token</a> and does not have a <code class="highlighter-rouge">next</code> link.</li>
  <li>Okta doesn’t publish additional metadata about the user until primary authentication has successfully completed.
See the Response Example in this section for details.</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-forgot-password-with-email-factor">Request Example for Forgot Password with Email Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "EMAIL",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-forgot-password-with-email-factor">Response Example for Forgot Password with Email Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-sms-factor">Forgot Password with SMS Factor</h4>

<p>Starts a new password recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a SMS OTP (challenge) to the user’s mobile phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for the user to <a href="#verify-sms-recovery-factor">verify the OTP</a>.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g email or SMS) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<blockquote>
  <p>SMS recovery factor must be enabled via the user’s assigned password policy to use this operation.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-for-forgot-password-with-sms-factor">Request Example for Forgot Password with SMS Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "SMS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-forgot-password-with-sms-factor">Response Example for Forgot Password with SMS Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-call-factor">Forgot Password with Call Factor</h4>

<p>Starts a new password recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a Voice Call with OTP (challenge) to the user’s phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for user to <a href="#verify-call-recovery-factor">verify the OTP</a>.</p>

<p>Note:</p>

<ul>
  <li>Primary authentication of a user’s recovery credential (e.g email or SMS or Voice Call) has not yet completed.</li>
  <li>Okta won’t publish additional metadata about the user until primary authentication has successfully completed.</li>
  <li>Voice Call recovery factor must be enabled via the user’s assigned password policy to use this operation.</li>
</ul>

<h5 id="request-example-for-forgot-password-with-call-factor">Request Example for Forgot Password with Call Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "call",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-forgot-password-with-call-factor">Response Example for Forgot Password with Call Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/CALL/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/CALL/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-trusted-application">Forgot Password with Trusted Application</h4>

<p>Allows a <a href="#trusted-application">trusted application</a> such as an external portal to implement its own primary authentication process and directly obtain a <a href="#recovery-token">recovery token</a> for a user given just the user’s identifier.</p>

<blockquote>
  <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation that requires an administrator API token and should be restricted to trusted web applications.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<blockquote>
  <p>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="/docs/api/getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-for-forgot-password-with-trusted-application">Request Example for Forgot Password with Trusted Application</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-forgot-password-with-trusted-application">Response Example for Forgot Password with Trusted Application</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VBQ0gwBp5LyJJFdbmWCM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recovery"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/token"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="unlock-account">Unlock Account</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/unlock</span></p>

<p>Starts a new unlock recovery transaction for a given user and issues a <a href="#recovery-token">recovery token</a> that can be used to unlock a user’s account.</p>

<ul>
  <li><a href="#unlock-account-with-email-factor">Unlock Account with Email Factor</a></li>
  <li><a href="#unlock-account-with-sms-factor">Unlock Account with SMS Factor</a></li>
  <li><a href="#unlock-account-with-trusted-application">Unlock Account with Trusted Application</a></li>
</ul>

<blockquote>
  <p>Self-service unlock must be permitted via the user’s assigned password policy to use this operation.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-for-unlock-account">Request Parameters for Unlock Account</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Max Length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (dade.murphy) or unique fully-qualified login (dade.murphy@example.com)</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>Recovery factor to use for primary authentication</td>
      <td>Body</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code></td>
      <td>FALSE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td>2048</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>A valid <code class="highlighter-rouge">factoryType</code> is required for requests without an API token with admin privileges. (See <a href="#unlock-account-with-trusted-application">Unlock Account with Trusted Application</a>)</p>
</blockquote>

<h5 class="api api-response api-response-params" id="response-parameter-public-application-for-unlock-account">Response Parameter Public Application for Unlock Account</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status for the new recovery transaction.</p>

<p>You always receive a <a href="#recovery-transaction-model">Recovery Transaction</a> response, even if the requested <code class="highlighter-rouge">username</code> isn’t a valid identifier to prevent information disclosure.</p>

<h5 class="api api-response api-response-params" id="response-parameter-trusted-application-for-unlock-account">Response Parameter Trusted Application for Unlock Account</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with an issued <code class="highlighter-rouge">recoveryToken</code> that can be distributed to the end user.</p>

<p>You receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">username</code> requested is not valid.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recovery not allowed for unknown user."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaetVarN2dKS6ap08dq0k4n7A"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-email-factor">Unlock Account with Email Factor</h4>

<p>Starts a new unlock recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a recovery email to the user’s primary and secondary email address with a <a href="#recovery-token">recovery token</a> that can be used to complete the transaction.</p>

<p>Since the recovery email is distributed out-of-band and may be viewed on a different user agent or device, this operation does not return a <a href="#state-token">state token</a> and does not have a <code class="highlighter-rouge">next</code> link.</p>

<p>Note:</p>

<ul>
  <li>Primary authentication of a user’s recovery credential (e.g <code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code>) has not yet completed.</li>
  <li>Okta will not publish additional metadata about the user until primary authentication has successfully completed.</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-email-factor">Request Example for Email Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "EMAIL",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-email-factor">Response Example for Email Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-sms-factor">Unlock Account with SMS Factor</h4>

<p>Starts a new unlock recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a SMS OTP (challenge) to the user’s mobile phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for user to <a href="#verify-sms-recovery-factor">verify the OTP</a>.</p>

<p>Note:</p>

<ul>
  <li>Primary authentication of a user’s recovery credential (e.g email or SMS) has not yet completed.</li>
  <li>Okta won’t publish additional metadata about the user until primary authentication has successfully completed.</li>
  <li>SMS recovery factor must be enabled via the user’s assigned password policy to use this operation.</li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-unlock-account-with-sms-factor">Request Example for Unlock Account with SMS Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "SMS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-unlock-account-with-sms-factor">Response Example for Unlock Account with SMS Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-trusted-application">Unlock Account with Trusted Application</h4>

<p>Allows a <a href="#trusted-application">trusted application</a> such as an external portal to implement its own primary authentication process and directly obtain a <a href="#recovery-token">recovery token</a> for a user given just the user’s identifier.</p>

<p>Note:</p>

<ul>
  <li>
    <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation that requires an administrator API token and should be restricted to <a href="#trusted-application">trusted web applications</a>.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
  </li>
  <li>
    <p>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="/docs/api/getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</p>
  </li>
</ul>

<h5 class="api api-request api-request-example" id="request-example-for-unlock-account-with-sms-factor-trusted-application">Request Example for Unlock Account with SMS Factor (Trusted Application)</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-unlock-account-with-sms-factor-trusted-application">Response Example for Unlock Account with SMS Factor (Trusted Application)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VBQ0gwBp5LyJJFdbmWCM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recovery"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/token"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="verify-recovery-factor">Verify Recovery Factor</h3>

<h4 class="api api-operation" id="verify-sms-recovery-factor">Verify SMS Recovery Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/sms/verify</span></p>

<p>Verifies a SMS OTP (<code class="highlighter-rouge">passCode</code>) sent to the user’s mobile phone for primary authentication for a recovery transaction with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-sms-recovery-factor">Request Parameters for Verify SMS Recovery Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-verify-sms-recovery-factor">Response Parameters for Verify SMS Recovery Factor</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oae2uOmZcuzToCPEV2Pc_f5zw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your token doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-verify-sms-recovery-factor">Request Example for Verify SMS Recovery Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh",
  "passCode": "657866"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-sms-recovery-factor">Response Example for Verify SMS Recovery Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 class="api api-operation" id="resend-sms-recovery-challenge">Resend SMS Recovery Challenge</h6>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/sms/resend</span></p>

<p>Resends a SMS OTP (<code class="highlighter-rouge">passCode</code>) to the user’s mobile phone</p>

<h4 class="api api-request api-request-params" id="request-parameters-for-resend-sms-recovery-challenge">Request Parameters for Resend SMS Recovery Challenge</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-for-resend-sms-recovery-challenge">Response Parameters for Resend SMS Recovery Challenge</h4>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<h4 class="api api-request api-request-example" id="request-example-for-resend-sms-recovery-challenge">Request Example for Resend SMS Recovery Challenge</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/sms/resend"</span>
</code></pre>
</div>

<h4 class="api api-response api-response-example" id="response-example-for-resend-sms-recovery-challenge">Response Example for Resend SMS Recovery Challenge</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p>The <code class="highlighter-rouge">factorType</code> and <code class="highlighter-rouge">recoveryType</code> properties vary depending on recovery transaction.</p>
</blockquote>

<h4 class="api api-operation" id="verify-call-recovery-factor">Verify Call Recovery Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/call/verify</span></p>

<p>Verifies a Voice Call OTP (<code class="highlighter-rouge">passCode</code>) sent to the user’s device for primary authentication for a recovery transaction with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-call-recovery-factor">Request Parameters for Verify Call Recovery Factor</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>Passcode received via the voice call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-verify-call-recovery-factor">Response Parameters for Verify Call Recovery Factor</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oae2uOmZcuzToCPEV2Pc_f5zw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your token doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-verify-call-recovery-factor">Request Example for Verify Call Recovery Factor</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh",
  "passCode": "65786"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/CALL/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-call-recovery-factor">Response Example for Verify Call Recovery Factor</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 class="api api-operation" id="resend-call-recovery-challenge">Resend Call Recovery Challenge</h6>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/call/resend</span></p>

<p>Resends a Voice Call with OTP (<code class="highlighter-rouge">passCode</code>) to the user’s phone</p>

<h4 class="api api-request api-request-params" id="request-parameters-for-resend-call-recovery-challenge">Request Parameters for Resend Call Recovery Challenge</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-for-resend-call-recovery-challenge">Response Parameters for Resend Call Recovery Challenge</h4>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<h4 class="api api-request api-request-example" id="request-example-for-resend-call-recovery-challenge">Request Example for Resend Call Recovery Challenge</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/CALL/resend"</span>
</code></pre>
</div>

<h4 class="api api-response api-response-example" id="response-example-for-resend-call-recovery-challenge">Response Example for Resend Call Recovery Challenge</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/CALL/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/factors/CALL/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <code class="highlighter-rouge">factorType</code> and <code class="highlighter-rouge">recoveryType</code> properties vary depending on the recovery transaction.</p>

<h3 class="api api-operation" id="verify-recovery-token">Verify Recovery Token</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/token</span></p>

<p>Validates a <a href="#recovery-token">recovery token</a> that was distributed to the end user to continue the recovery transaction.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-verify-recovery-token">Request Parameters for Verify Recovery Token</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>recoveryToken</td>
      <td><a href="#recovery-token">Recovery token</a> that was distributed to the end user via out-of-band mechanism such as email</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-verify-recovery-token">Response Parameters for Verify Recovery Token</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with a <code class="highlighter-rouge">RECOVERY</code> status and an issued <code class="highlighter-rouge">stateToken</code> that must be used to complete the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">401 Unauthorized</code> status code if you attempt to use an expired or invalid <a href="#recovery-token">recovery token</a>.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid token provided"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeY-4G_TBUTBSZAn9n7oZCfw"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-verify-recovery-token">Request Example for Verify Recovery Token</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "recoveryToken": "00xdqXOE5qDZX8-PBR1bYv8AESqIFinDy3yul01tyh"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/token"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-verify-recovery-token">Response Example for Verify Recovery Token</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="answer-recovery-question">Answer Recovery Question</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/answer</span></p>

<p>Answers the user’s recovery question to ensure only the end user redeemed the <a href="#recovery-token">recovery token</a> for recovery transaction with a <code class="highlighter-rouge">RECOVERY</code> <a href="#transaction-state">status</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-answer-recovery-question">Request Parameters for Answer Recovery Question</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to user’s recovery question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-answer-recovery-question">Response Parameters for Answer Recovery Question</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The recovery question answer did not match our records."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeGEiIPFfeR3a_XxpezUH9ug"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-answer-recovery-question">Request Example for Answer Recovery Question</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "answer": "Annie Oakley"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/recovery/answer"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-answer-recovery-question">Response Example for Answer Recovery Question</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_RESET"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"expiration"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"excludeUsername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="nt">"age"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"minAgeMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nt">"historyCount"</span><span class="p">:</span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/reset_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="reset-password">Reset Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/credentials/reset_password</span></p>

<p>Resets a user’s password to complete a recovery transaction with a <code class="highlighter-rouge">PASSWORD_RESET</code> <a href="#transaction-state">state</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-reset-password">Request Parameters for Reset Password</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>User’s new password</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-reset-password">Response Parameters for Reset Password</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The recovery question answer did not match our records."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeGEiIPFfeR3a_XxpezUH9ug"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>You will also receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">newPassword</code> does not meet password policy requirements for the user.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The password does meet the complexity requirements of the current password policy."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeS4O7BUp5Roefkk_y4Z2u8Q"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-for-reset-password">Request Example for Reset Password</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/credentials/reset_password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-reset-password">Response Example for Reset Password</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="state-management-operations">State Management Operations</h2>

<h3 class="api api-operation" id="get-transaction-state">Get Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn</span></p>

<p>Retrieves the current <a href="#transaction-state">transaction state</a> for a <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-get-transaction-state">Request Parameters for Get Transaction State</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-get-transaction-state">Response Parameters for Get Transaction State</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-for-get-transaction-state">Request Example for Get Transaction State</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-get-transaction-state">Response Example for Get Transaction State</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="previous-transaction-state">Previous Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/previous</span></p>

<p>Moves the current <a href="#transaction-state">transaction state</a> back to the previous state.</p>

<p>For example, when changing state from the start of primary authentication to MFA_ENROLL &gt; ENROLL_ACTIVATE &gt; OTP,
the user’s phone might stop working. Since the user can’t see the QR code, the transaction must return to MFA_ENROLL.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-previous-transaction-state">Request Parameters for Previous Transaction State</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-previous-transaction-state">Response Parameters for Previous Transaction State</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-for-previous-transaction-state">Request Example for Previous Transaction State</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-previous-transaction-state">Response Example for Previous Transaction State</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="skip-transaction-state">Skip Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/skip</span></p>

<p>Send a skip link to skip the current <a href="#transaction-state">transaction state</a> and advance to the next state.</p>

<p>If the response returns a skip link, then you can advance to the next state without completing the current state (such as changing the password).
For example, after being warned that a password will soon expire, the user can skip the change password prompt
by clicking a skip link.</p>

<p>Another example: a user has enrolled in multiple factors. After enrolling in one the user receives a skip link
to skip the other factors.</p>

<blockquote>
  <p>This operation is only available for <code class="highlighter-rouge">MFA_ENROLL</code> or <code class="highlighter-rouge">PASSWORD_WARN</code> states when published as a link.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-for-skip-transaction-state">Request Parameters for Skip Transaction State</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-skip-transaction-state">Response Parameters for Skip Transaction State</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-for-skip-transaction-state">Request Example for Skip Transaction State</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/skip"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-skip-transaction-state">Response Example for Skip Transaction State</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="cancel-transaction">Cancel Transaction</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/cancel</span></p>

<p>Cancels the current transaction and revokes the <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-for-cancel-transaction">Request Parameters for Cancel Transaction</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-for-cancel-transaction">Response Parameters for Cancel Transaction</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>relayState</td>
      <td>Optional state value that was persisted for the authentication or recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-request api-request-example" id="request-example-for-cancel-transaction">Request Example for Cancel Transaction</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-for-cancel-transaction">Response Example for Cancel Transaction</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="transaction-model">Transaction Model</h2>

<p>The Authentication API is a <em>stateful</em> API that implements a finite state machine with <a href="#transaction-state">defined states</a> and transitions.  Each initial authentication or recovery request is issued a unique <a href="#state-token">state token</a> that must be passed with each subsequent request until the transaction is complete or canceled.</p>

<p>The Authentication API leverages the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a> format to publish <code class="highlighter-rouge">next</code> and <code class="highlighter-rouge">prev</code> links for the current transaction state which should be used to transition the state machine.</p>

<h3 id="authentication-transaction-model">Authentication Transaction Model</h3>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Readonly</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td>ephemeral <a href="#state-token">token</a> that encodes the current state of an authentication transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>type  <a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></td>
      <td>type of authentication transaction. Currently available during step-up authentication</td>
      <td><a href="#authentication-type">Authentication Type</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>sessionToken</td>
      <td>ephemeral <a href="#session-token">one-time token</a> used to bootstrap an Okta session</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of the <code class="highlighter-rouge">stateToken</code> or <code class="highlighter-rouge">sessionToken</code> (See <a href="#tokens">Tokens</a>)</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>current <a href="#transaction-state">state</a> of the authentication transaction</td>
      <td><a href="#transaction-state">Transaction State</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>optional opaque value that is persisted for the lifetime of the authentication transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td>2048</td>
    </tr>
    <tr>
      <td>factorResult</td>
      <td>optional status of last verification attempt for a given factor</td>
      <td><a href="#factor-result">Factor Result</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#embedded-resources">embedded resources</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#links-object">link relations</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The <code class="highlighter-rouge">relayState</code> parameter is an opaque value for the transaction and processed as untrusted data which is just echoed in a response.  It is the client’s responsibility to escape/encode this value before displaying in a UI such as a HTML document using <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet">best practices</a></p>
</blockquote>

<h3 id="recovery-transaction-model">Recovery Transaction Model</h3>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Readonly</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td>ephemeral <a href="#state-token">token</a> that encodes the current state of a recovery transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>recoveryToken</td>
      <td>ephemeral <a href="#recovery-token">one-time token</a> for recovery transaction to be distributed to the end user</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of the <code class="highlighter-rouge">stateToken</code> or <code class="highlighter-rouge">recoveryToken</code> (See <a href="#tokens">Tokens</a>)</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>current <a href="#transaction-state">state</a> of the recovery transaction</td>
      <td><a href="#transaction-state">Transaction State</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>optional opaque value that is persisted for the lifetime of the recovery transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td>2048</td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of selected factor for the recovery transaction</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>recoveryType</td>
      <td>type of recovery operation</td>
      <td><code class="highlighter-rouge">PASSWORD</code> or <code class="highlighter-rouge">UNLOCK</code></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorResult</td>
      <td>optional status of last verification attempt for the <code class="highlighter-rouge">factorType</code></td>
      <td><a href="#factor-result">Factor Result</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#embedded-resources">embedded resources</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#links-object">link relations</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The <code class="highlighter-rouge">relayState</code> parameter is an opaque value for the transaction and processed as untrusted data which is just echoed in a response.  It is the client’s responsibility to escape/encode this value before displaying in a UI such as a HTML document using <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet">best-practices</a></p>
</blockquote>

<h3 id="transaction-state">Transaction State</h3>

<p><img src="/assets/auth-state-model-68716d545f9f5f572294d403ccc902d8aca40d12ff9054aa1a026aeb14b82f9b.png" state="" model="" diagram="" alt="State Model Diagram" /></p>

<p>An authentication or recovery transaction has one of the following states:</p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
      <th>Next Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">UNAUTHENTICATED</code>  <a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></td>
      <td>User tried to access protected resource (ex: an app) but user is not authenticated</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#step-up-authentication-without-okta-session">authenticate user credentials</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_WARN</code></td>
      <td>The user’s password was successfully validated but is about to expire and should be changed.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#change-password">change the user’s password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_EXPIRED</code></td>
      <td>The user’s password was successfully validated but is expired.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#change-password">change the user’s expired password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RECOVERY</code></td>
      <td>The user has requested a recovery token to reset their password or unlock their account.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#answer-recovery-question">answer the user’s recovery question</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RECOVERY_CHALLENGE</code></td>
      <td>The user must verify the factor-specific recovery challenge.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation to <a href="#verify-recovery-factor">verify the recovery factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_RESET</code></td>
      <td>The user successfully answered their recovery question and must to set a new password.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#reset-password">reset the user’s password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">LOCKED_OUT</code></td>
      <td>The user account is locked; self-service unlock or admin unlock is required.</td>
      <td>POST to the <code class="highlighter-rouge">unlock</code> link relation to perform a <a href="#unlock-account">self-service unlock</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_ENROLL</code></td>
      <td>The user must select and enroll an available factor for additional verification.</td>
      <td>POST to the <code class="highlighter-rouge">enroll</code> link relation for a specific factor to <a href="#enroll-factor">enroll the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_ENROLL_ACTIVATE</code></td>
      <td>The user must activate the factor to complete enrollment.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#activate-factor">activate the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_REQUIRED</code></td>
      <td>The user must provide additional verification with a previously enrolled factor.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation for a specific factor to <a href="#verify-factor">provide additional verification</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_CHALLENGE</code></td>
      <td>The user must verify the factor-specific challenge.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation to <a href="#verify-factor">verify the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">SUCCESS</code></td>
      <td>The transaction has completed successfully</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>You advance the authentication or recovery transaction to the next state by posting a request with a valid <a href="#state-token">state token</a> to the the <code class="highlighter-rouge">next</code> link relation published in the <a href="#links-object">JSON HAL links object</a> for the response.</p>

<p><a href="#enroll-factor">Enrolling a factor</a> and <a href="#verify-factor">verifying a factor</a> do not have <code class="highlighter-rouge">next</code> link relationships as the end user must make a selection of which factor to enroll or verify.</p>

<blockquote>
  <p>Never assume a specific state transition or URL when navigating the <a href="#transaction-state">state model</a>.  Always inspect the response for <code class="highlighter-rouge">status</code> and dynamically follow the <a href="#links-object">published link relations</a>.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"skip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="authentication-type">Authentication Type</h3>
<p><a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a></p>

<p>Represents the type of authentication</p>

<p>Currently available only during <a href="#step-up-authentication">step-up authentication</a>.</p>

<h3 id="tokens">Tokens</h3>

<p>Authentication API operations return different token types depending on the <a href="#transaction-state">state</a> of the authentication or recovery transaction.</p>

<h4 id="state-token">State Token</h4>

<p>Ephemeral token that encodes the current state of an authentication or recovery transaction.</p>

<ul>
  <li>The <code class="highlighter-rouge">stateToken</code> must be passed with every request except when verifying a <code class="highlighter-rouge">recoveryToken</code> that was distributed out-of-band</li>
  <li>The <code class="highlighter-rouge">stateToken</code> is only intended to be used between the web application performing end-user authentication and the Okta API. It should never be distributed to the end user via email or other out-of-band mechanisms.</li>
  <li>The lifetime of the <code class="highlighter-rouge">stateToken</code> uses a sliding scale expiration algorithm that extends with every request.  Always inspect the <code class="highlighter-rouge">expiresAt</code> property for the transaction when making decisions based on lifetime.</li>
</ul>

<blockquote>
  <p>All Authentication API operations will return <code class="highlighter-rouge">401 Unauthorized</code> status code when you attempt to use an expired state token.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid token provided"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeY-4G_TBUTBSZAn9n7oZCfw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p>State transitions are strictly enforced for state tokens.  You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if you call an Authentication API operation with a <code class="highlighter-rouge">stateToken</code> with an invalid <a href="#transaction-state">state</a>.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000079"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This operation is not allowed in the current authentication state."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000079"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaen9Ly_ivHQJ-STb8KiADh9w"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This operation is not allowed in the current authentication state."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="recovery-token">Recovery Token</h4>

<p>One-time token issued as <code class="highlighter-rouge">recoveryToken</code> response parameter when a recovery transaction transitions to the <code class="highlighter-rouge">RECOVERY</code> status.</p>

<ul>
  <li>The token can be exchanged for a <code class="highlighter-rouge">stateToken</code> to recover a user’s password or unlock their account.</li>
  <li>Unlike the <code class="highlighter-rouge">statusToken</code> the <code class="highlighter-rouge">recoveryToken</code> should be distributed out-of-band to a user such as via email.</li>
  <li>The lifetime of the <code class="highlighter-rouge">recoveryToken</code> is managed by the organization’s security policy.</li>
</ul>

<p>The <code class="highlighter-rouge">recoveryToken</code> is sent via an out-of-band channel to the end user’s verified email address or SMS phone number and acts as primary authentication for the recovery transaction.</p>

<blockquote>
  <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation and should be restricted to trusted web applications.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<h4 id="session-token">Session Token</h4>

<p>One-time token issued as <code class="highlighter-rouge">sessionToken</code> response parameter when an authentication transaction completes with the <code class="highlighter-rouge">SUCCESS</code> status.</p>

<ul>
  <li>The token can be exchanged for a session with the <a href="sessions.html#create-session-with-session-token">Session API</a> or converted to a <a href="/use_cases/authentication/session_cookie.html">session cookie</a>.</li>
  <li>The lifetime of the <code class="highlighter-rouge">sessionToken</code> is the same as the lifetime of a user’s session and managed by the organization’s security policy.</li>
</ul>

<h3 id="factor-result">Factor Result</h3>

<p>The <code class="highlighter-rouge">MFA_CHALLENGE</code> or <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state can return an additional property <strong>factorResult</strong> that provides additional context for the last factor verification attempt.</p>

<p>The following table shows the possible values for this property:</p>

<table>
  <thead>
    <tr>
      <th>factorResult</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">WAITING</code></td>
      <td>Factor verification has started but not yet completed (e.g user hasn’t answered phone call yet)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CANCELLED</code></td>
      <td>Factor verification was canceled by user</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIMEOUT</code></td>
      <td>Unable to verify factor within the allowed time window</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIME_WINDOW_EXCEEDED</code></td>
      <td>Factor was successfully verified but outside of the computed time window.  Another verification is required in current time window.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSCODE_REPLAYED</code></td>
      <td>Factor was previously verified within the same time window.  User must wait another time window and retry with a new verification.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ERROR</code></td>
      <td>Unexpected server error occurred verifying factor.</td>
    </tr>
  </tbody>
</table>

<h3 id="links-object">Links Object</h3>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the current <a href="#transaction-state">transaction state</a> using the <a href="https://tools.ietf.org/html/rfc7159">JSON</a> specification.  These links are used to transition the <a href="#transaction-state">state machine</a> of the authentication or recovery transaction.</p>

<p>The Links Object is read only.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>next</td>
      <td>Transitions the  <a href="#transaction-state">state machine</a> to the next state.  <strong>Note: The <code class="highlighter-rouge">name</code> of the link relationship provides a hint of the next operation required</strong></td>
    </tr>
    <tr>
      <td>prev</td>
      <td>Transitions the  <a href="#transaction-state">state machine</a> to the previous state.</td>
    </tr>
    <tr>
      <td>cancel</td>
      <td>Cancels the current  transaction and revokes the <a href="#state-token">state token</a>.</td>
    </tr>
    <tr>
      <td>skip</td>
      <td>Skips over the current  transaction state to the next valid <a href="#transaction-state">state</a></td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

<h2 id="embedded-resources">Embedded Resources</h2>

<h3 id="user-object">User Object</h3>

<p>A subset of <a href="users.html#user-model">user properties</a> published in an authentication or recovery transaction after the user successfully completes primary authentication.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>Unique key for user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passwordChanged</td>
      <td>Timestamp when user’s password last changed</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>User’s profile</td>
      <td><a href="#user-profile-object">User Profile Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>recovery_question</td>
      <td>User’s recovery question</td>
      <td><a href="#recovery-question-object">Recovery Question Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00udnlQDVLVRIVXESCMZ"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's to a major player in the cowboy scene?"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="user-profile-object">User Profile Object</h4>

<p>Subset of <a href="users.html#profile-object">profile properties</a> for a user</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>login</td>
      <td>Unique login for user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>firstName</td>
      <td>First name of user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>lastName</td>
      <td>Last name of user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>locale</td>
      <td>User’s default location for purposes of localizing items such as currency, date time format, numerical representations, etc.</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td><a href="https://tools.ietf.org/html/rfc5646">RFC 5646</a></td>
    </tr>
    <tr>
      <td>timeZone</td>
      <td>User’s time zone</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td><a href="https://tools.ietf.org/html/rfc6557">IANA Time Zone database format</a></td>
    </tr>
  </tbody>
</table>

<h4 id="remember-device-policy-object">Remember Device Policy Object</h4>

<p>A subset of policy settings of the Sign-On Policy or App Sign-On Policy published during <code class="highlighter-rouge">MFA_REQUIRED</code>, <code class="highlighter-rouge">MFA_CHALLENGE</code> states</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>allowRememberDevice</td>
      <td>Indicates whether remember device is allowed based on the policy</td>
      <td>Boolean</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>rememberDeviceByDefault</td>
      <td>Indicates whether user previously opted to remember the current device</td>
      <td>Boolean</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>rememberDeviceLifetimeInMinutes</td>
      <td>Indicates how long the current verification would be valid (based on the policy)</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 id="when-sign-on-policy-is-device-based">When sign-on policy is device based</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  
   </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="when-sign-on-policy-is-time-based">When sign-on policy is time based</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  
   </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w"> 
   </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">5</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">rememberDeviceByDefault</code> is true if the user has chosen to remember the current device.</li>
  <li>The value of <code class="highlighter-rouge">rememberDeviceLifetimeInMinutes</code> depends on the factor lifetime value configured in the Sign-On Policy rule</li>
</ul>

<h5 id="when-policy-is-not-based-on-time-or-device">When policy is not based on time or device</h5>
<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  
   </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="target-object">Target Object</h4>

<p><a href="/docs/api/getting_started/releases-at-okta.html#early-access-ea"> <span class="api-label api-label-ea "> <i class="fa fa-flag"></i> Early Access </span> </a> 
Represents the target resource that user tried accessing. Typically this is the app that user is trying to sign-in.
Currently this is available only during <a href="#step-up-authentication">step-up authentication</a>.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>Type of the target resource. Currently only ‘APP’ is the supported type.</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>name</td>
      <td>Name of the target resource</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>label</td>
      <td>Label of the target resource</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td>Discoverable resources for the target</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 id="recovery-question-object">Recovery Question Object</h4>

<p>User’s recovery question used for verification of a recovery transaction</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>question</td>
      <td>User’s recovery question</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h3 id="password-policy-object">Password Policy Object</h3>

<p>A subset of policy settings for the user’s assigned password policy published during <code class="highlighter-rouge">PASSWORD_WARN</code>, <code class="highlighter-rouge">PASSWORD_EXPIRED</code>, or <code class="highlighter-rouge">PASSWORD_RESET</code> states</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>expiration</td>
      <td>Password expiration settings</td>
      <td><a href="#password-expiration-object">Password Expiration Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>complexity</td>
      <td>Password complexity settings</td>
      <td><a href="#password-complexity-object">Password Complexity Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiration"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"excludeUsername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">},</span><span class="w">
   </span><span class="nt">"age"</span><span class="p">:{</span><span class="w">
     </span><span class="nt">"minAgeMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
     </span><span class="nt">"historyCount"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="password-expiration-object">Password Expiration Object</h4>

<p>Specifies the password age requirements of the assigned password policy</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>passwordExpireDays</td>
      <td>number of days before password is expired</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 id="password-complexity-object">Password Complexity Object</h4>

<p>Specifies the password complexity requirements of the assigned password policy</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minLength</td>
      <td>Minimum number of characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>minLowerCase</td>
      <td>Minimum number of lower case characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>minUpperCase</td>
      <td>Minimum number of upper case characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>minNumber</td>
      <td>Minimum number of numeric characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>minSymbol</td>
      <td>Minimum number of symbol characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>excludeUsername</td>
      <td>Prevents username or domain from appearing in the password</td>
      <td>Boolean</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Duplicate the minimum Active Directory requirements in these settings for AD-mastered users. No enforcement is triggered by Okta settings for AD-mastered users.</p>
</blockquote>

<h4 id="password-age-object">Password Age Object</h4>

<p>Specifies the password requirements related to password age and history</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minAgeMinutes</td>
      <td>Minimum number of minutes required since the last password change</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>historyCount</td>
      <td>Number of previous passwords that the current password can’t match</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h3 id="factor-object">Factor Object</h3>

<p>A subset of <a href="factors.html#factor-model">factor properties</a> published in an authentication transaction during <code class="highlighter-rouge">MFA_ENROLL</code>, <code class="highlighter-rouge">MFA_REQUIRED</code>, or <code class="highlighter-rouge">MFA_CHALLENGE</code> states</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for factor</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>vendorName</td>
      <td>factor Vendor Name (Same as provider but for On Prem MFA it depends on Admin Settings)</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors-for-providers">supported factor</a></td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#factor-embedded-resources">embedded resources</a> related to the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#factor-links-object">discoverable resources</a> for the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostfm3hPNYSOIOIVTQWY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="factor-embedded-resources">Factor Embedded Resources</h4>

<h5 id="totp-factor-activation-object">TOTP Factor Activation Object</h5>

<p>TOTP factors, when activated, have an embedded verification object which describes the <a href="http://tools.ietf.org/html/rfc6238">TOTP</a> algorithm parameters.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>timeStep</td>
      <td>Time-step size for TOTP</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>sharedSecret</td>
      <td>Unique secret key for prover</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>encoding</td>
      <td>Encoding of <code class="highlighter-rouge">sharedSecret</code></td>
      <td><code class="highlighter-rouge">base32</code> or <code class="highlighter-rouge">base64</code></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>keyLength</td>
      <td>Number of digits in an TOTP value</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td>Discoverable resources related to the activation</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>This object implements <a href="https://tools.ietf.org/html/rfc6238">the TOTP standard</a>, which is used by apps like Okta Verify and Google Authenticator.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HE64TMLL2IUZW2ZLB"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="totp-activation-links-object">TOTP Activation Links Object</h6>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the TOTP activation object using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>qrcode</td>
      <td>QR code that encodes the TOTP parameters that can be used for enrollment</td>
    </tr>
  </tbody>
</table>

<h5 id="phone-object">Phone Object</h5>

<p>The phone object describes previously enrolled phone numbers for the <code class="highlighter-rouge">sms</code> factor.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>Unique key for phone</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>Profile of phone</td>
      <td><a href="#phone-profile-object">Phone Profile Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Status of phone</td>
      <td><code class="highlighter-rouge">ACTIVE</code> or <code class="highlighter-rouge">INACTIVE</code></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mbl198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="phone-profile-object">Phone Profile Object</h6>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>phoneNumber</td>
      <td>Masked phone number</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 id="push-factor-activation-object">Push Factor Activation Object</h5>

<p>Push factors must complete activation on the device by scanning the QR code or visiting activation link sent via email or sms.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>expiresAt</td>
      <td>Lifetime of activation</td>
      <td>Date</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td>Discoverable resources related to the activation</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T07:44:22.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{yourOktaDomain}.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/qr/00Ji8qVBNJD4LmjYy1WZO2VbNqvvPdaCVua-1qjypa"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="push-factor-activation-links-object">Push Factor Activation Links Object</h6>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the push factor activation object using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>qrcode</td>
      <td>QR code that encodes the push activation code needed for enrollment on the device</td>
    </tr>
    <tr>
      <td>send</td>
      <td>Sends an activation link via <code class="highlighter-rouge">email</code> or <code class="highlighter-rouge">sms</code> for users who can’t scan the QR code</td>
    </tr>
  </tbody>
</table>

<h5 id="factor-links-object">Factor Links Object</h5>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the factor using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<p>The Factor Links Object is read only.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enroll</td>
      <td><a href="#enroll-factor">Enrolls a factor</a></td>
    </tr>
    <tr>
      <td>verify</td>
      <td><a href="#verify-factor">Verifies a factor</a></td>
    </tr>
    <tr>
      <td>questions</td>
      <td>Lists all possible questions for the <code class="highlighter-rouge">question</code> factor type</td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

      </div>
      <div class="TableOfContents TableOfContentsPreload">
        <div class="TableOfContents-item is-level1">
          <script>
                  document.write(document.title.split('|')[0].trim());
          </script>
        </div>
        <div class="TableOfContentsLoader"></div>
      </div><!-- END Page Content -->
    </section><!-- END Page Center w/Sub Nav & Content -->

    <!-- START Footer -->
    <footer class="Footer">
    <div class="Wrap">

        <div class="Row">

            <div class="Column--3 Column--medium-6 Column--xSmall-12">

                <a class="Logo" href="https://www.okta.com/" target="_blank" rel="noopener noreferrer">
                    <img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta">
                    Visit okta.com
                </a>

            </div>

            <div class="Column--3 Column--medium-12 Column--xSmall-12">

                <h4>Social</h4>
                <ul class="Footer-links Footer-links--social">
                    <li><a class="Footer-links--github" target="_blank" rel="noopener noreferrer" href="http://github.com/oktadeveloper">Github</a></li>
                    <li><a class="Footer-links--twitter" target="_blank" rel="noopener noreferrer" href="http://twitter.com/OktaDev">Twitter</a></li>
                    <li><a class="Footer-links--forum" target="_blank" rel="noopener noreferrer" href="https://devforum.okta.com/">Forum</a></li>
                    <li><a class="Footer-links--rss" target="_blank" rel="noopener noreferrer" href="http://feeds.feedburner.com/OktaBlog">RSS Blog</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>More Info</h4>
                <ul class="Footer-links">
                    <li><a target="_blank" href="https://developer.okta.com/integrate-with-okta/">Integrate with Okta</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/docs/platform-release-notes/platform-release-notes.html">Release Notes</a></li>
                    <li><a href="/3rd_party_notices/">3rd Party Notices</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>Contact &amp; Legal</h4>
                <ul class="Footer-links">
                    <li><a href="/contact/">Contact Sales</a></li>
                    <li><a target="_blank" rel="noopener noreferrer" href="mailto:developers@okta.com">Contact Support</a></li>
                    <li><a href="/terms/">Terms &amp; Conditions</a></li>
                    <li><a href="/privacy/">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script type="text/javascript" src="/assets/master-0365dd27cf276cb2a15c0a43906ca592538204cf1ad4557547bf4e50609b411e.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/docs-69bc61e9ef45544fd9e1a764f80f3ae15bb3fcd23f5dcdf454973ce926e0d717.js"></script>
    

    <!-- END Footer -->
  </div>
  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
